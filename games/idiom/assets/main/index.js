System.register("chunks:///_virtual/AudioManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var n,t,i,r,o,a,c,u,l,s,p,d;return{setters:[function(e){n=e.defineProperty,t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized,a=e.createClass},function(e){c=e.cclegacy,u=e._decorator,l=e.AudioSource,s=e.AudioClip,p=e.assert,d=e.Component}],execute:function(){var f,h,y,g,_,b,v,k,A;c._RF.push({},"b3cdeWuOIVCF5X8MHkWg4jR","AudioManager",void 0);var S=u.ccclass,C=u.property;e("AudioManager",(f=S("AudioManager"),h=C(l),y=C(s),f((A=k=function(e){function n(){for(var n,t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return n=e.call.apply(e,[this].concat(i))||this,r(o(n),"_audioSource",b,o(n)),r(o(n),"clickBtn",v,o(n)),n}i(n,e);var t=n.prototype;return t.onLoad=function(){var e=this.node.getComponent(l);p(e),this._audioSource=e,n._instance=this},t.playClickBtn=function(){this._audioSource.playOneShot(this.clickBtn)},a(n,null,[{key:"instance",get:function(){return this._instance}}]),n}(d),n(k,"_instance",null),b=t((_=A).prototype,"_audioSource",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(_.prototype,"clickBtn",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=_))||g));c._RF.pop()}}}));

System.register("chunks:///_virtual/LevelController.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var r,e,i,n,o,s,a,l,c,d,u,h,f,p;return{setters:[function(t){r=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized,o=t.defineProperty},function(t){s=t.cclegacy,a=t._decorator,l=t.Prefab,c=t.resources,d=t.tween,u=t.Color,h=t.instantiate,f=t.Vec3,p=t.Component}],execute:function(){var v,g,_,y,b;s._RF.push({},"c4def2Wu6lIsqe9mmj5La3P","LevelController",void 0);var G=a.ccclass,k=a.property;t("LevelController",(v=G("LevelController"),g=k({type:l}),v((b=r((y=function(t){function r(){for(var r,e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return r=t.call.apply(t,[this].concat(s))||this,i(n(r),"gridPrfb",b,n(r)),o(n(r),"_levelData",void 0),o(n(r),"_currentGrid",void 0),o(n(r),"_gridsMap",{}),r}e(r,t);var s=r.prototype;return s.start=function(){this.init()},s.init=function(){var t=this;c.load("levels/level.3",(function(r,e){t._levelData=t.processData(e.json),console.log("关卡数据：",t._levelData),t.genGrids(),t.genBottomGrids()}))},s.processData=function(t){this._levelData={words:t};var r={};t.forEach((function(t){t.blanks.forEach((function(t){r[t]=!0}))}));for(var e=[],i=1;i<=8;i++)for(var n=1;n<=10;n++){var o=r[i+"_"+n],s=this.getWordByAxis(i,n),a={type:o?"blank":s?"char":"empty"};o?a._char=s:a.char=s,e.push(a)}return{words:t,chars:e}},s.__getWordsByAxis=function(t,r){return this._levelData.words.filter((function(e){return e.axis.includes(t+"_"+r)}))},s.getWordByAxis=function(t,r){var e=this.__getWordsByAxis(t,r);if(e.length>0){var i=e[0];return i.word.split("")[i.axis.indexOf(t+"_"+r)]}return""},s.setSelected=function(t){if(this._currentGrid==t)this.resetWord();else{this._currentGrid=t;var r=this.node.getChildByName("highlight");d(r).to(.1,{position:t.node.position}).start()}},s.resetWord=function(){"blank"==this._currentGrid.data.type&&this._currentGrid.setChar("")},s.fillWord=function(t){"blank"==this._currentGrid.data.type&&(this._currentGrid.setChar(t.data._char),this.checkCurrentWord()&&this.selectNext())},s.selectNext=function(){var t,r=this,e=Object.values(this._gridsMap);if(this.__getWordsByAxis(this._currentGrid.row,this._currentGrid.col).find((function(e){var i=e.blanks.find((function(t){return!r._gridsMap[t].isFilled}));if(i)return t=r._gridsMap[i],!0})),!t){var i=e.slice(this._currentGrid.index+1);t=i.find((function(t){return"blank"==t.data.type&&!t.isFilled}))}t||(t=e.find((function(t){return"blank"==t.data.type&&!t.isFilled}))),t&&this.setSelected(t)},s.checkCurrentWord=function(){var t=this,r=!0;return this.__getWordsByAxis(this._currentGrid.row,this._currentGrid.col).forEach((function(e){t.isAllFilled(e)&&(t.checkFillResult(e)?(t.pleyRightAni(e),console.log(e),t.checkLevelPass()&&console.log("过关")):(r=!1,t.playErrorAni(e)))})),r},s.pleyRightAni=function(t){var r=this;t.axis.forEach((function(t){var e=r._gridsMap[t];"blank"==e.data.type&&(e.Label.color=u.WHITE)}))},s.playErrorAni=function(t){var r=this;t.axis.forEach((function(t){var e=r._gridsMap[t];"blank"==e.data.type&&(e.Label.color=u.RED)}))},s.checkFillResult=function(t){var r=this;return t.axis.every((function(t){return r._gridsMap[t].isFillRight}))},s.checkLevelPass=function(){return Object.values(this._gridsMap).every((function(t){return t.isFillRight}))},s.isAllFilled=function(t){var r=this;return t.axis.every((function(t){return r._gridsMap[t].isFilled}))},s.genGrids=function(){for(var t=this.node.getChildByName("Grids"),r=70,e=70,i=!0,n=0;n<8;n++)for(var o=0;o<10;o++){var s=h(this.gridPrfb),a=new f(o*(r+1)-360+r/2+5,300,0);s.setPosition(a),a.y=-n*(e+1),d(s).delay(.05*o+.05*(7-n)).to(.2,{position:a},{easing:"quadOut"}).start();var l=s.getComponent("Grid"),c=this._levelData.chars[10*n+o];if(l.setData(c),l.col=o+1,l.row=n+1,this._gridsMap[l.row+"_"+l.col]=l,"blank"==c.type&&i){i=!1,this.setSelected(l);var u=this.node.getChildByName("highlight");d(u).delay(.05*o+.05*(7-n)).to(.2,{position:a},{easing:"quadOut"}).start()}t.addChild(s)}},s.genBottomGrids=function(){var t=this,r=this._levelData.chars.filter((function(t){return"blank"==t.type}));r.sort((function(){return Math.random()>.5?-1:1})),r.forEach((function(r){var e=h(t.gridPrfb),i=e.getComponent("Grid");i.isBottom=!0,i.setData(r),t.node.getChildByName("BottomGrids").addChild(e)}))},r}(p)).prototype,"gridPrfb",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=y))||_));s._RF.pop()}}}));

System.register("chunks:///_virtual/Grid.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts"],(function(t){"use strict";var e,i,n,r,a,s,o,c,l,h,u,d;return{setters:[function(t){e=t.inheritsLoose,i=t.defineProperty,n=t.assertThisInitialized,r=t.createClass},function(t){a=t.cclegacy,s=t._decorator,o=t.Input,c=t.resources,l=t.Sprite,h=t.Component,u=t.Label},function(t){d=t.AudioManager}],execute:function(){var p;a._RF.push({},"cb6d6v8f/FH5riM6Sd9GSlf","Grid",void 0);var f=s.ccclass;s.property,t("Grid",f("Grid")(p=function(t){function a(){for(var e,r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a))||this,i(n(e),"data",void 0),i(n(e),"isBottom",!1),i(n(e),"col",void 0),i(n(e),"row",void 0),e}e(a,t);var s=a.prototype;return s.start=function(){this.bindEvents()},s.bindEvents=function(){var t=this;"empty"!=this.data.type&&this.node.on(o.EventType.TOUCH_END,(function(e){var i=t.node.parent.parent.getComponent("LevelController");d.instance.playClickBtn(),t.isBottom?i.fillWord(t):i.setSelected(t)}))},s.setData=function(t){switch(this.data=t,this.setType(),t.type){case"char":this.setChar(t.char);break;case"blank":this.isBottom&&this.setChar(t._char)}},s.setType=function(){var t=this,e=this.data.type;switch(e){case"char":case"blank":c.load("images/bg_grid_"+e+"/spriteFrame",(function(e,i){t.node.getChildByName("BG").getComponent(l).spriteFrame=i}))}},s.setChar=function(t){null!=t&&(this.Label.string=t)},r(a,[{key:"Label",get:function(){return this.node.getChildByName("char").getComponent(u)}},{key:"isFilled",get:function(){return""!=this.Label.string}},{key:"isFillRight",get:function(){switch(this.data.type){case"blank":return this.Label.string==this.data._char;default:return!0}}},{key:"index",get:function(){return this.col-1+10*(this.row-1)}}]),a}(h))||p);a._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var n,o,t,r,a,c;return{setters:[function(e){n=e.inheritsLoose},function(e){o=e.cclegacy,t=e._decorator,r=e.director,a=e.ProgressBar,c=e.Component}],execute:function(){var s;o._RF.push({},"eca02g/7jhMn7yg+ztQQWwk","GameManager",void 0);var i=t.ccclass;t.property,e("GameManager",i("GameManager")(s=function(e){function o(){return e.apply(this,arguments)||this}n(o,e);var t=o.prototype;return t.start=function(){},t.onStartButtonClicked=function(){console.log("开始游戏"),r.loadScene("loading",(function(e,n){var o=n.getChildByPath("Canvas/ProgressBar").getComponent(a);r.preloadScene("GameLevel",(function(e,n){o.progress=e/n}),(function(e){console.log("onLoad"),r.loadScene("GameLevel")}))}))},o}(c))||s);o._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./AudioManager.ts","./LevelController.ts","./Grid.ts","./GameManager.ts"],(function(){"use strict";return{setters:[null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});