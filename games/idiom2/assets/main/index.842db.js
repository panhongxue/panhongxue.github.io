System.register("chunks:///_virtual/AudioManagerMain.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./storage.ts"],(function(i){"use strict";var e,t,n,o,r,u,a,c,s,l,p,d,f;return{setters:[function(i){e=i.defineProperty,t=i.applyDecoratedDescriptor,n=i.inheritsLoose,o=i.initializerDefineProperty,r=i.assertThisInitialized,u=i.createClass},function(i){a=i.cclegacy,c=i._decorator,s=i.AudioSource,l=i.AudioClip,p=i.assert,d=i.Component},function(i){f=i.storage}],execute:function(){var M,h,g,_,y,S,m,v,A;a._RF.push({},"0198cipuXpM84CYVT5USs6d","AudioManagerMain",void 0);var b=c.ccclass,C=c.property;i("AudioManagerMain",(M=b("AudioManagerMain"),h=C(s),g=C(l),M((A=v=function(i){function e(){for(var e,t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return e=i.call.apply(i,[this].concat(n))||this,o(r(e),"_audioSource",S,r(e)),o(r(e),"mainMusic",m,r(e)),e}n(e,i);var t=e.prototype;return t.onLoad=function(){var i=this.node.getComponent(s);p(i),this._audioSource=i,this.setMuiscMute(f.AudioSetting.music),e._instance=this},t.stop=function(){this._audioSource.stop()},t.playMainMusic=function(){this._audioSource.clip=this.mainMusic,this._audioSource.play()},t.setMuiscMute=function(i){this._audioSource.volume=i?1:0},u(e,null,[{key:"instance",get:function(){return this._instance}}]),e}(d),e(v,"_instance",null),S=t((y=A).prototype,"_audioSource",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=t(y.prototype,"mainMusic",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=y))||_));a._RF.pop()}}}));

System.register("chunks:///_virtual/enums.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){var r;t("GridState",void 0),e._RF.push({},"10574qxTLBPpYpsd+o/q3rr","enums",void 0),function(t){t[t.DEFAULT=0]="DEFAULT",t[t.RIGHT=1]="RIGHT",t[t.ERROR=2]="ERROR"}(r||(r=t("GridState",{}))),e._RF.pop()}}}));

System.register("chunks:///_virtual/main.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./AudioManagerMain.ts"],(function(n){"use strict";var o,e,t,r,i,a,c;return{setters:[function(n){o=n.inheritsLoose},function(n){e=n.cclegacy,t=n._decorator,r=n.ProgressBar,i=n.director,a=n.Component},function(n){c=n.AudioManagerMain}],execute:function(){var s;e._RF.push({},"1b3ffTiPC5Jc4Mr40gCsH+2","main",void 0);var l=t.ccclass;t.property,n("main",l("main")(s=function(n){function e(){return n.apply(this,arguments)||this}o(e,n);var t=e.prototype;return t.onLoad=function(){},t.start=function(){c.instance.playMainMusic()},t.onStartButtonClick=function(){console.log("去答题");var n=this.node.getChildByPath("ProgressBar");n.active=!0;var o=n.getComponent(r),e=0;i.preloadScene("level",(function(n,t){var r=n/t;r>e?e=r:console.log("--------倒灌-------"),o.progress=e,console.log("preload:",n,t,e)}),(function(n){console.log("onLoad"),i.loadScene("level")}))},e}(a))||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/Native.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var n,t,r,i;return{setters:[function(e){n=e.createClass,t=e.defineProperty,r=e.asyncToGenerator},function(e){i=e.cclegacy}],execute:function(){i._RF.push({},"1b596opJJBBB5RgOqEMKqgu","Native",void 0);var a=e("Native",function(){function e(){t(this,"_callbackMap",{}),this.supportJSB&&(jsb.bridge.onNative=this.onNativeCallback)}var i=e.prototype;return i.callNative=function(e,n){console.log("jsb.bridge.sendToNative()",e,n),this.supportJSB?jsb.bridge.sendToNative(e,n):this.mockShowAD(e,n)},i.mockShowAD=function(e,n){if("showBannerAD"==e){var t=JSON.parse(n),r=document.createElement("div");r.id="banner_ad",r.style.cssText="\n        border:1px solid green;\n        position:absolute;\n        z-index: 9999;\n        left: "+t.x+";\n        top: "+t.y+";\n        width: "+t.width+";\n        height: "+t.height+";\n      ",document.body.appendChild(r)}if("closeBannerAD"==e){var i=document.getElementById("banner_ad");i&&i.parentNode.removeChild(i)}},i.onNativeCallback=function(e,n){var t;try{t=JSON.parse(n)}catch(e){}if(t){var r=this._callbackMap[t.id];r&&r(t.result)}},i.showBannerAD=function(e){this.callNative("showBannerAD",JSON.stringify(e))},i.closeBannerAD=function(){this.callNative("closeBannerAD")},i.showRewardedAD=function(){var e=r(regeneratorRuntime.mark((function e(){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var t="ad-"+Math.random().toString().replace(".","")+"-"+Date.now();n._callbackMap[t]=e,n.callNative("showRewardedAD",JSON.stringify({id:t}))})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n(e,[{key:"supportJSB",get:function(){return"undefined"!=typeof jsb}}],[{key:"instance",get:function(){return null==this._instance&&(this._instance=new e,console.log("----- supportJSB -----",this._instance.supportJSB)),this._instance}}]),e}());t(a,"_instance",null),i._RF.pop()}}}));

System.register("chunks:///_virtual/Level.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./storage.ts","./enums.ts","./Native.ts","./AudioManagerLevel.ts","./config.ts","./User.ts","./util.ts","./Grid.ts","./Word.ts"],(function(t){"use strict";var e,r,i,n,s,a,o,l,c,u,d,h,f,v,_,g,p,b,m,w,y,C,D,L,x,G;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized,s=t.defineProperty,a=t.asyncToGenerator},function(t){o=t.cclegacy,l=t._decorator,c=t.Prefab,u=t.JsonAsset,d=t.director,h=t.Label,f=t.instantiate,v=t.Vec3,_=t.tween,g=t.Color,p=t.Component},function(t){b=t.storage},function(t){m=t.GridState},function(t){w=t.Native},function(t){y=t.AudioManagerLevel},function(t){C=t.config},function(t){D=t.User},function(t){L=t.util},function(t){x=t.Grid},function(t){G=t.Word}],execute:function(){var A,S,k,B,R,W,P;o._RF.push({},"3e04bwTD4xP+Y+M9dOi/RtN","Level",void 0);var M=l.ccclass,T=l.property;t("Level",(A=M("Level"),S=T({type:c}),k=T(u),A((W=e((R=function(t){function e(){for(var e,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,i(n(e),"gridPrfb",W,n(e)),i(n(e),"levelsDataJson",P,n(e)),s(n(e),"_level",void 0),s(n(e),"_levelData",void 0),s(n(e),"_currentGrid",null),s(n(e),"_gridsMap",{}),s(n(e),"_bottomGrids",[]),s(n(e),"_wordCtrl",void 0),s(n(e),"_userCtrl",void 0),s(n(e),"_timers",[]),s(n(e),"_awaitRewardAD",!1),e}r(e,t);var o=e.prototype;return o.onLoad=function(){this.init()},o.start=function(){y.instance.playLevelMusic(),d.preloadScene("pass")},o.onDestroy=function(){this.clearTimers()},o.init=function(){this._level=b.currentLevel,this.updateLevelLabel(),this._userCtrl=new D,this.renderUserData(),this._levelData=this.processData(this.levelsDataJson.json["level-"+this._level]),console.log("关卡数据：",this._levelData),this.renderLevel(),this.renderTimer()},o.updateLevelLabel=function(){this.node.getChildByPath("game/levelLabel/Label").getComponent(h).string="第"+this._level+"关"},o.renderUserData=function(){this.setLabel("header/jingyan/Label",this._userCtrl.jingyan),this.setLabel("header/jinbi/Label",this._userCtrl.jinbi),this._userCtrl.jinbi<20&&(this.node.getChildByPath("game/btns/tishi/rewardAD").active=!0)},o.renderLevel=function(){null==b.levelStartTime&&(b.levelStartTime=Date.now()),this.genBottomGrids(),this.genGrids(),this.restoreStatus(),this._wordCtrl=new G(this._gridsMap)},o.resetLevel=function(){b.levelStatusData="",this.renderLevel()},o.renderTimer=function(){var t=this;this._timers.push(setInterval((function(){var e=Date.now()-b.levelStartTime;if(!isNaN(e)){var r=L.formatDate(new Date(e),e>=36e5?"h:mm:ss":"mm:ss");t.setLabel("game/btns/timer/Label",r)}}),1e3))},o.genBottomGrids=function(){var t=this,e=b.bottomData,r=this._levelData.chars.filter((function(t){return"blank"==t.type}));if(e){var i=!1;if(e.length===r.length)i=e.every((function(t){return r.some((function(e){return e._char===t._char}))}));i||(b.levelStatusData="",e=null)}e||((e=r).sort((function(){return Math.random()>.5?-1:1})),b.bottomData=e);var n=this.node.getChildByPath("game/bottomGrids");n.removeAllChildren(),e.forEach((function(e){var r=f(t.gridPrfb),i=r.getComponent(x);t._bottomGrids.push(i),i.levelCtrl=t,i.isBottom=!0,i.setData(e),n.addChild(r)}))},o.genGrids=function(){var t=this.node.getChildByPath("game/grids/bg");t.removeAllChildren();for(var e=C.grid,r=!0,i=0;i<C.grids.rows;i++)for(var n=0;n<C.grids.cols;n++){var s=f(this.gridPrfb),a=new v(n*(e.w+2)-360+21+e.w/2+5,350,0);s.setPosition(a),a.y=-i*(e.h+2)+235,_(s).delay(.05*n+.05*(7-i)).to(.2,{position:a},{easing:"quadOut"}).start();var o=s.getComponent(x);o.levelCtrl=this,o.setChar("");var l=this._levelData.chars[i*C.grids.cols+n];o.setData(l),o.col=n+1,o.row=i+1,this._gridsMap[o.axis]=o,b.currentSelectedAxis?o.axis===b.currentSelectedAxis&&this.setSelected(o):"blank"===l.type&&r&&(r=!1,this.setSelected(o)),t.addChild(s)}},o.restoreStatus=function(){var t=this,e=b.FillMap;Object.keys(e).forEach((function(r){var i=t._gridsMap[r],n=e[r],s=n.state,a=n.bottom_idx;if(void 0!==s&&(i.State=s),void 0!==a){var o=t._bottomGrids[a];i.fillWord(o),i.State===m.RIGHT&&o.setChar("")}}))},o.setSelected=function(t){t.canSelect&&(null!==this._currentGrid&&(this._currentGrid.Selected=!1),this._currentGrid=t,t.Selected=!0,t.isFilled&&this._currentGrid.resetWord())},o.fillWord=function(){var t=a(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._currentGrid.canSelect){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this._currentGrid.fillWord(e);case 4:this.checkCurrentWord()&&this.selectNext();case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),o.checkCurrentWord=function(){var t=this,e=!1,r=!0;return this.__getWordsByAxis(this._currentGrid.row,this._currentGrid.col).forEach((function(i){t._wordCtrl.isAllFilled(i)&&(t._wordCtrl.checkFillResult(i)?(e=!0,r=!0,t._wordCtrl.playRightAni(i),setTimeout((function(){t._wordCtrl.checkLevelPass()&&(console.log("过关"),b.currentLevel=t._level+1,d.loadScene("pass"))}),400)):(e||(r=!1),t._wordCtrl.playErrorAni(i)))})),r},o.selectNext=function(){var t,e=this,r=Object.values(this._gridsMap);this.__getWordsByAxis(this._currentGrid.row,this._currentGrid.col).find((function(r){var i=r.blanks.find((function(t){return!e._gridsMap[t].isFilled}));if(i)return t=e._gridsMap[i],!0})),t||(t=r.find((function(t){return"blank"==t.data.type&&!t.isFilled}))),t&&this.setSelected(t)},o.resetError=function(t){if(t.Label.color.equals(g.RED)){var e=this.__getWordsByAxis(t.row,t.col);this._wordCtrl.resetError(e)}},o.clearTimers=function(){this._timers.forEach((function(t){clearInterval(t),clearTimeout(t)}))},o.setLabel=function(t,e){this.node.getChildByPath(t).getComponent(h).string=e},o.processData=function(t){this._levelData={words:t};var e={};t.forEach((function(t){t.blanks.forEach((function(t){e[t]=!0}))}));for(var r=[],i=1;i<=8;i++)for(var n=1;n<=10;n++){var s=e[i+"_"+n],a=this.getWordByAxis(i,n),o={type:s?"blank":a?"char":"empty"};s?o._char=a:o.char=a,r.push(o)}return{words:t,chars:r}},o.__getWordsByAxis=function(t,e){return this._levelData.words.filter((function(r){return r.axis.includes(t+"_"+e)}))},o.getWordByAxis=function(t,e){var r=this.__getWordsByAxis(t,e);if(r.length>0){var i=r[0];return i.word.split("")[i.axis.indexOf(t+"_"+e)]}return""},o.onTishiClick=function(){var t=a(regeneratorRuntime.mark((function t(){var e,r,i=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=this._bottomGrids.find((function(t){return t.data._char===i._currentGrid.data._char})))){t.next=16;break}if(!(this._userCtrl.jinbi>=20)){t.next=8;break}this._userCtrl.jinbi-=20,this.renderUserData(),this.fillWord(e),t.next=16;break;case 8:if(!this._awaitRewardAD){t.next=10;break}return t.abrupt("return");case 10:return this._awaitRewardAD=!0,t.next=13,w.instance.showRewardedAD();case 13:r=t.sent,this._awaitRewardAD=!1,r&&this.fillWord(e);case 16:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),o.onReturnButtonClick=function(){y.instance.stop(),d.loadScene("main")},e}(p)).prototype,"gridPrfb",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(R.prototype,"levelsDataJson",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=R))||B));o._RF.pop()}}}));

System.register("chunks:///_virtual/Pass.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./storage.ts","./Native.ts","./AudioManagerLevel.ts","./User.ts","./util.ts"],(function(e){"use strict";var t,n,i,s,a,r,o,l,u,c,h,v,g,p,d,f,y,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,s=e.assertThisInitialized,a=e.defineProperty},function(e){r=e.cclegacy,o=e._decorator,l=e.JsonAsset,u=e.UITransform,c=e.view,h=e.Label,v=e.director,g=e.Component},function(e){p=e.storage},function(e){d=e.Native},function(e){f=e.AudioManagerLevel},function(e){y=e.User},function(e){b=e.util}],execute:function(){var L,D,B,_,w;r._RF.push({},"458430gYihLzo3Vnb3GbyjR","Pass",void 0);var C=o.ccclass,m=o.property;e("Pass",(L=C("Pass"),D=m(l),L((w=t((_=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,i(s(t),"levelsDataJson",w,s(t)),a(s(t),"_userCtrl",void 0),a(s(t),"_level",void 0),t}n(t,e);var r=t.prototype;return r.start=function(){this._userCtrl=new y,this._level=p.currentLevel-1,this.updateLevelLabel(),this.updateUserJifen(),p.levelStatusData="",this.showBannerAD()},r.showBannerAD=function(){var e=this.node.getChildByPath("bannerAD").getComponent(u).getBoundingBoxToWorld(),t=c.getFrameSize().width/c.getDesignResolutionSize().width,n={x:e.x*t,y:e.y*t,width:e.width*t,height:e.height*t};d.instance.showBannerAD(n)},r.updateUserJifen=function(){var e=(Date.now()-p.levelStartTime)/1e3,t={jingyan:e<30?3:e<60?2:1,jinbi:this.getLevelBlanks(this._level).length};this._userCtrl.pass(this._level,t),this.setLabel("user/jinbi",t.jinbi),this.setLabel("user/jingyan",t.jingyan)},r.getLevelBlanks=function(e){return b.processData(this.levelsDataJson.json["level-"+e]).chars.filter((function(e){return"blank"==e.type}))},r.setLabel=function(e,t){this.node.getChildByPath(e).getComponent(h).string=t},r.updateLevelLabel=function(){this.node.getChildByPath("levelLabel/Label").getComponent(h).string="第"+this._level+"关"},r.onBtnReturnClick=function(){d.instance.closeBannerAD(),f.instance.stop(),v.loadScene("main")},r.onBtnNextClick=function(){d.instance.closeBannerAD(),v.loadScene("level")},t}(g)).prototype,"levelsDataJson",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=_))||B));r._RF.pop()}}}));

System.register("chunks:///_virtual/Renwu.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./User.ts","./Grade.ts"],(function(e){"use strict";var t,r,n,i,a,o,s,c,l,u,d,p,g,h,f,y,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized,a=e.defineProperty},function(e){o=e.cclegacy,s=e._decorator,c=e.Prefab,l=e.instantiate,u=e.ScrollView,d=e.resources,p=e.SpriteFrame,g=e.Sprite,h=e.Label,f=e.Component},function(e){y=e.User},function(e){b=e.Grade}],execute:function(){var w,C,P,m,v;o._RF.push({},"4caf7QPRodEqoIBgefyHHLK","Renwu",void 0);var L=s.ccclass,B=s.property;e("Renwu",(w=L("Renwu"),C=B({type:c}),w((v=t((m=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o))||this,n(i(t),"gradePrfb",v,i(t)),a(i(t),"_userCtrl",void 0),a(i(t),"gradeList",{"初学弟子":0,"初入江湖":10,"江湖新秀":20,"莫问出身":40,"江湖少侠":80,"七窍玲珑":160,"江湖大侠":320,"踏雪无痕":640,"江湖豪侠":1280,"扶危济困":2560,"一派掌门":5120,"碧血丹心":10240,"一代宗师":20480,"清微淡远":40960,"武林盟主":81920,"超凡入圣":163840,"武林至尊":327680,"独孤求败":8e6}),t}r(t,e);var o=t.prototype;return o.onLoad=function(){this._userCtrl=new y,this.renderGrade(),this.node.active=!1},o.start=function(){},o.renderGrade=function(){var e=this,t=this.node.getChildByPath("popup/bg/ScrollView/view/content"),r=this._userCtrl.jingyan,n=Object.keys(this.gradeList),i=n.length,a=!1,o=0;n.forEach((function(n,s){var c=e.gradeList[n],u=l(e.gradePrfb),d=u.getComponent(b);r>=c?d.status="reach":a?d.status="unreach":(a=!0,d.status="current",d.setProgress(r,c),e.setMainTitle(n),e.setLabel("renwu/titleBG/num",s),e.setLabel("renwu/gradeProgressLabel","还差"+(c-r)+"点经验可升级"),e.loadGradeImage(s),o=(s>i/2?s+1:s-1)/i),d.string=n,t.addChild(u)})),this.node.getChildByPath("popup/bg/ScrollView").getComponent(u).scrollToPercentVertical(1-o)},o.loadGradeImage=function(e){var t=this;d.load("images/renwu/"+e.toString().padStart(2,"0")+"/spriteFrame",p,(function(e,r){t.node.parent.getChildByPath("renwu/Sprite").getComponent(g).spriteFrame=r}))},o.setMainTitle=function(e){this.node.parent.getChildByPath("renwu/titleBG/Label").getComponent(h).string=e},o.setLabel=function(e,t){this.node.parent.getChildByPath(e).getComponent(h).string=t},o.onClose=function(){this.node.active=!1},o.onRenwuClick=function(){this.node.active=!0},t}(f)).prototype,"gradePrfb",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=m))||P));o._RF.pop()}}}));

System.register("chunks:///_virtual/Grade.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,s,n,r,i,o,a,c,u;return{setters:[function(t){e=t.inheritsLoose,s=t.defineProperty,n=t.assertThisInitialized,r=t.createClass},function(t){i=t.cclegacy,o=t._decorator,a=t.ProgressBar,c=t.Label,u=t.Component}],execute:function(){var h;i._RF.push({},"5c5eb4Md3xFlZuAA5UvyVx/","Grade",void 0);var l=o.ccclass;o.property,t("Grade",l("Grade")(h=function(t){function i(){for(var e,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i))||this,s(n(e),"_status",void 0),e}e(i,t);var o=i.prototype;return o.start=function(){},o.setBG=function(t){var e=this.node;e.children.forEach((function(t){t.active=!1})),e.getChildByName(t).active=!0},o.setProgress=function(t,e){this.node.getChildByName("current").getComponent(a).progress=t/e,this.node.getChildByPath(this.status+"/num").getComponent(c).string=t+"/"+e},r(i,[{key:"string",set:function(t){this.node.getChildByPath(this.status+"/Label").getComponent(c).string=t}},{key:"status",get:function(){return this._status},set:function(t){this._status=t,this.setBG(t)}}]),i}(u))||h);i._RF.pop()}}}));

System.register("chunks:///_virtual/config.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var o,n,r,e,c;return{setters:[function(t){o=t.defineProperty,n=t.inheritsLoose},function(t){r=t.cclegacy,e=t._decorator,c=t.Component}],execute:function(){var i,s,u;r._RF.push({},"5f2eaqunZtNMoK/hBwIwfCe","config",void 0);var f=e.ccclass;e.property,t("config",f("config")((u=s=function(t){function o(){return t.apply(this,arguments)||this}return n(o,t),o.prototype.start=function(){},o}(c),o(s,"grids",{rows:8,cols:10}),o(s,"grid",{w:65,h:65}),i=u))||i);r._RF.pop()}}}));

System.register("chunks:///_virtual/AudioManagerLevel.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./storage.ts"],(function(e){"use strict";var i,t,u,o,n,r,c,a,s,l,d,p,f,h;return{setters:[function(e){i=e.defineProperty,t=e.applyDecoratedDescriptor,u=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized,r=e.createClass},function(e){c=e.cclegacy,a=e._decorator,s=e.AudioSource,l=e.AudioClip,d=e.game,p=e.assert,f=e.Component},function(e){h=e.storage}],execute:function(){var S,M,y,_,g,v,b,m,A,L,k,z,w;c._RF.push({},"60904vvy3tM4Iy0oIK3FnQe","AudioManagerLevel",void 0);var B=a.ccclass,C=a.property;e("AudioManagerLevel",(S=B("AudioManagerLevel"),M=C(s),y=C(s),_=C(l),g=C(l),S((w=z=function(e){function i(){for(var i,t=arguments.length,u=new Array(t),r=0;r<t;r++)u[r]=arguments[r];return i=e.call.apply(e,[this].concat(u))||this,o(n(i),"_audioSourceMusic",m,n(i)),o(n(i),"_audioSourceSound",A,n(i)),o(n(i),"clickBtn",L,n(i)),o(n(i),"levelMusic",k,n(i)),i}u(i,e);var t=i.prototype;return t.onLoad=function(){d.addPersistRootNode(this.node);var e=this.node.getComponents(s);p(e),this._audioSourceMusic=e[0],this._audioSourceSound=e[1],this.setMuiscMute(h.AudioSetting.music),this.setSoundMute(h.AudioSetting.sound),i._instance=this},t.stop=function(){this._audioSourceMusic.stop()},t.playClickBtn=function(){this._audioSourceSound.playOneShot(this.clickBtn)},t.playLevelMusic=function(){this._audioSourceMusic.playing||(this._audioSourceMusic.clip=this.levelMusic,this._audioSourceMusic.play())},t.setMuiscMute=function(e){this._audioSourceMusic.volume=e?1:0},t.setSoundMute=function(e){this._audioSourceSound.volume=e?1:0},r(i,null,[{key:"instance",get:function(){return this._instance}}]),i}(f),i(z,"_instance",null),m=t((b=w).prototype,"_audioSourceMusic",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(b.prototype,"_audioSourceSound",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(b.prototype,"clickBtn",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(b.prototype,"levelMusic",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=b))||v));c._RF.pop()}}}));

System.register("chunks:///_virtual/Setting.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./storage.ts","./AudioManagerLevel.ts","./Level.ts"],(function(e){"use strict";var t,n,i,o,s,c,u,l,r,a,g;return{setters:[function(e){t=e.inheritsLoose,n=e.defineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,s=e._decorator,c=e.Toggle,u=e.director,l=e.Component},function(e){r=e.storage},function(e){a=e.AudioManagerLevel},function(e){g=e.Level}],execute:function(){var d;o._RF.push({},"7a5a9JgsdRD3oTo8DWc/dEM","Setting",void 0);var h=s.ccclass;s.property,e("Setting",h("Setting")(d=function(e){function o(){for(var t,o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];return t=e.call.apply(e,[this].concat(s))||this,n(i(t),"_levelCtrl",void 0),t}t(o,e);var s=o.prototype;return s.start=function(){this._levelCtrl=this.node.scene.getChildByPath("Canvas").getComponent(g),this.initToggle()},s.initToggle=function(){this.setToggleChecked("Mask/SpriteSplash/ToggleMusic",r.AudioSetting.music),this.setToggleChecked("Mask/SpriteSplash/ToggleSound",r.AudioSetting.sound)},s.setToggleChecked=function(e,t){this.node.getChildByPath(e).getComponent(c).isChecked=!t},s.onMusicCheckedChange=function(e){var t=!e.isChecked;r.AudioSetting.music=t,a.instance.setMuiscMute(t)},s.onSoundCheckedChange=function(e){var t=!e.isChecked;r.AudioSetting.sound=t,a.instance.setSoundMute(t)},s.onOpenExplain=function(){u.loadScene("expl")},s.onResetClick=function(){this._levelCtrl.resetLevel(),this.onClose()},s.onSettingButtonClick=function(){this.node.active=!0},s.onClose=function(){this.node.active=!1},o}(l))||d);o._RF.pop()}}}));

System.register("chunks:///_virtual/uma.min.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"9f288Eo04hLxIrF8m9gxOdA","uma.min",void 0);var n="[UMENG] -- ",r=function(){var e=null,t=!1;function r(){this.setDebug=function(e){t=e},this.d=function(){if(t)try{"string"==typeof arguments[0]&&(arguments[0]=n+arguments[0]),console.log.apply(console,arguments)}catch(e){}},this.i=function(){try{if(t)try{"string"==typeof arguments[0]&&(arguments[0]=n+arguments[0]),console.log.apply(console,arguments)}catch(e){}}catch(e){}},this.e=function(){if(t)try{"string"==typeof arguments[0]&&(arguments[0]=n+arguments[0]),console.log.apply(console,arguments)}catch(e){}},this.w=function(){if(t)try{"string"==typeof arguments[0]&&(arguments[0]=n+arguments[0]),console.log.apply(console,arguments)}catch(e){}},this.v=function(){if(t)try{"string"==typeof arguments[0]&&(arguments[0]=n+arguments[0]),console.log.apply(console,arguments)}catch(e){}},this.t=function(){if(t)try{console.log.apply(console,arguments)}catch(e){}},this.tip=function(){try{"string"==typeof arguments[0]&&(arguments[0]=n+arguments[0]),console.log.apply(console,arguments)}catch(e){}},this.tip_w=function(e){try{console.log("%c [UMENG] -- "+e,"background:red; padding: 4px; padding-right: 8px; border-radius: 4px; color: #fff;")}catch(e){}},this.err=function(){try{"string"==typeof arguments[0]&&(arguments[0]=n+arguments[0]),console.log.apply(console,arguments)}catch(e){}},this.repeat=function(e){for(var t=e;t.length<86;)t+=e;return t}}return function(){return null===e&&(e=new r),e}}(),i=function(){var e=null;function t(){var e={};this.useOpenid=function(){return!!e.useOpenid},this.useSwanid=function(){return!!e.useSwanid},this.autoGetOpenid=function(){return!!e.autoGetOpenid},this.appKey=function(){return e.appKey},this.uploadUserInfo=function(){return e.uploadUserInfo},this.enableVerify=function(){return e.enableVerify},this.set=function(t){e=t},this.get=function(){return e},this.setItem=function(t,n){e[t]=n},this.getItem=function(t){return e[t]}}return function(){return e||(e=new t),e}}();function o(){}o.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){var r=this;function i(){r.off(e,i),t.apply(n,arguments)}return i._=t,this.on(e,i,n)},emit:function(e){for(var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,i=n.length;r<i;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],i=[];if(r&&t)for(var o=0,s=r.length;o<s;o++)r[o].fn!==t&&r[o].fn._!==t&&i.push(r[o]);return i.length?n[e]=i:delete n[e],this}};var s=new o;function a(){return cc?cc.sys&&cc.sys.platform&&cc.sys.platform<=111&&cc.sys.platform>=108?qg||hbs:void 0:qg||hbs}s.messageType={CONFIG_LOADED:0,UMA_LIB_INITED:1};var u=a(),c=new(function(){function e(){}return e.prototype.setStorage=function(e,t,n){u&&u.setStorage?u.setStorage({key:e,value:t,success:function(){"function"==typeof n&&n(!0)},fail:function(){"function"==typeof n&&n(!1)}}):(localStorage.setItem(e,t),"function"==typeof n&&n(!0))},e.prototype.getStorage=function(e,t){if(u&&u.getStorage)u.getStorage({key:e,success:function(e){"function"==typeof t&&t(e)},fail:function(n,i){r().w(e+"code = : "+i),"function"==typeof t&&t()}});else if(localStorage){var n=localStorage.getItem(e);"function"==typeof t&&t(n)}},e.prototype.removeStorage=function(e,t){u&&u.deleteStorage?u.deleteStorage({key:e,success:function(){"function"==typeof t&&t(!0)},fail:function(){"function"==typeof t&&t(!1)}}):localStorage&&(localStorage.removeItem(e),"function"==typeof t&&t(!0))},e.prototype.getSystemInfo=function(e){u.getSystemInfo({success:function(t){var n={model:t.model,brand:t.brand,screenWidth:t.screenWidth,screenHeight:t.screenHeight,platform:t.osType,pixelRatio:t.pixelRatio,platformVersion:t.platformVersionCode,language:t.language,deviceName:t.model,OSVersion:t.osVersionName,resolution:"",statusBarHeight:t.statusBarHeight};if(t.system){var r=t.system.split(" ");Array.isArray(r)&&(!n.platform&&(n.platform=r[0]),!n.OSVersion&&(n.OSVersion=r[1]))}var i=Math.round(t.screenWidth*t.pixelRatio),o=Math.round(t.screenHeight*t.pixelRatio);n.resolution=i>o?i+"*"+o:o+"*"+i,"function"==typeof e&&e(n)},fail:function(){"function"==typeof e&&e()}})},e.prototype.getDeviceInfo=function(e){"function"==typeof e&&e("")},e.prototype.getNetworkInfo=function(e){u.getNetworkType({success:function(t){"function"==typeof e&&e({networkAvailable:"none"!==t.networkType,networkType:t.networkType})},fail:function(){"function"==typeof e&&e()}})},e.prototype.request=function(e){var t=e.success,n=e.fail,r=!1,i=null;e.success=function(e){r||(i&&clearTimeout(i),"function"==typeof t&&t(e))},e.fail=function(){r||(i&&clearTimeout(i),"function"==typeof n&&n(!1))},u.request?u.request(e):XMLHttpRequest&&function(e,t){void 0===t&&(t=!0),(e=e||{}).method=e.method||"GET",e.url=e.url||"",e.success=e.success||function(){},e.fail=e.fail||function(){};var n,r,i=new XMLHttpRequest,o=[];if("object"==typeof e.data){for(var s in e.data)o.push(s+"="+encodeURIComponent(e.data[s]));n=JSON.stringify(e.data||{}),r=o.join("&")}else"string"==typeof e.data&&(n=e.data,r=e.data);if("POST"===e.method?i.open(e.method,e.url,t):i.open(e.method,e.url+"?"+r||"",t),e.header&&"object"==typeof e.header){for(var a in e.header)i.setRequestHeader(a,e.header[a]);e.header["content-type"]||e.header["Content-Type"]||i.setRequestHeader("content-type","text/plain")}t&&(i.timeout=e.timeout||3e4),i.onreadystatechange=function(){if(4==i.readyState&&200==i.status){var t={};try{t=JSON.parse(i.responseText)}catch(e){}e.success({data:t,status:i.status})}else 4==i.readyState&&e.fail({data:null,status:i.status})},"POST"===e.method?i.send(n||""):i.send()}(e,!0),i=setTimeout((function(){i&&clearTimeout(i),r=!0,"function"==typeof n&&n(r)}),e.timeout||3e4)},e.prototype.getSdkType=function(){return this.getPlatform()+"mp"},e.prototype.getPlatform=function(){return"quickgame"},e.prototype.getUserInfo=function(e){e&&e()},e.prototype.getAppInfoSync=function(){return{}},e.prototype.onShareAppMessage=function(e){},e.prototype.shareAppMessage=function(e){},e.prototype.getContext=function(){return a()},e.prototype.getLaunchOptionsSync=function(){var e=null;if(e)return e;if(!u.getLaunchOptionsSync)return{};try{e=u.getLaunchOptionsSync()}catch(t){e=null}return e||{}},e}()),f=function(e,t){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function p(e,t){function n(){this.constructor=e}f(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var d,l={SESSION_INTERVAL:3e4,LOG_URL:"/quickgamem_logs",GET_OPENID_URL:"",USERINFO_URL:"/uminiprogram_logs/comm/uif",ENDPOINT:"https://umini.shujupie.com",ENDPOINTB:"https://ulogs.umeng.com",DEVICE_INFO_KEY:"device_info",ADVERTISING_ID:"mobile_ad_id",ANDROID_ID:"android_id",CURRENT_SESSION:"current_session",SESSION_PAUSE_TIME:"session_pause_time",EVENT_SEND_DEFAULT_INTERVAL:15e3,EVENT_LAST_SEND_TIME:"last_send_time",MAX_EVENTID_LENGTH:128,MAX_PROPERTY_KEY_LENGTH:256,MAX_PROPERTY_KEYS_COUNT:100,REPORT_POLICY:"report_policy",REPORT_INTERVAL_TIME:"report_interval_time",REPORT_POLICY_START_SEND:"1",REPORT_POLICY_INTERVAL:"6",IMPRINT:"imprint",SEED_VERSION:"1.0.0",IMPL_VERSION:"2.7.2",ALIPAY_AVAILABLE_VERSION:"10.1.52",SHARE_PATH:"um_share_path",SHARES:"shares",REQUESTS:"requests",UUID:"um_uuid",UUID_SUFFIX:"ud",OPENID:"um_od",UNIONID:"um_unid",ALIPAYID:"um_alipayid",USERID:"um_userid",PROVIDER:"um_provider",SWANID:"um_swanid",ANONYMOUSID:"um_anonymousid",LAUNCH_OPTIONS:"LAUNCH_OPTIONS",UM_SSRC:"_um_ssrc",USER_INFO:"user_info",IS_ALIYUN:!1},h=function(e){for(var t="",n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],r=0;r<Number(e);r++)t+=n[Math.round(Math.random()*(n.length-1))];return t},g=function(e){return JSON.parse(JSON.stringify(e))},v=function(e,t){return!(!e||!t||0===t.length||t.length>e.length)&&e.substr(0,t.length)===t},_=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},y=function e(t,n){if(t===n)return!0;if(t&&"object"==typeof t&&n&&"object"==typeof n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(var r in t){if(Object.prototype.hasOwnProperty.call(n,r))return!1;if(!e(t[r],n[r]))return!1}return!0}return!1},m=function(e,t){if(!e)return"";if("string"==typeof t&&t.length){var n=new RegExp("^"+t+"*");e=e.replace(n,"")}else e=e.replace(/^s*/,"");return e},S=function(e){return"function"==typeof e},I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._openid="",t._unionid="",t._useOpenid=!1,t}return p(t,e),t.prototype.initID=function(e){var t=this;t._idType=t._useOpenid?"openid":"uuid",r().v("id type: ",t._idType),c.getStorage(l.UNIONID,(function(e){t._unionid=e})),this._useOpenid?c.getStorage(l.OPENID,(function(n){t._openid=n,e&&e()})):e&&e()},t.prototype.setUseOpenid=function(e){this._useOpenid=e},t.prototype.setOpenid=function(e){!this._openid&&e&&(this._openid=e,c.setStorage(l.OPENID,e))},t.prototype.setUnionid=function(e){!this._unionid&&e&&(this._unionid=e,c.setStorage(l.UNIONID,e))},t.prototype.getIdTracking=function(){var t=e.prototype.getIdTracking.call(this);return this._openid&&(t.openid=this._openid),this._unionid&&(t.unionid=this._unionid),this._userid&&(t.userid=this._userid),t},t.prototype.getId=function(){return this._useOpenid?this._openid:this._uuid},t}(function(){function e(){this._uuid="",this._userid="",this._provider="",this._idType=""}return e.prototype.createUUID=function(){return h(10)+Date.now()+h(7)+l.UUID_SUFFIX},e.prototype.initUUID=function(e){var t=this;c.getStorage(l.UUID,(function(n){n?t._uuid=n:(t._uuid=t.createUUID(),c.setStorage(l.UUID,t._uuid)),e&&e(n)}))},e.prototype.initUserid=function(){var e=this;c.getStorage(l.USERID,(function(t){!e._userid&&t&&(e._userid=t,r().v("userId is ",t))})),c.getStorage(l.PROVIDER,(function(t){!e._provider&&t&&(e._provider=t,r().v("provider is ",t))}))},e.prototype.init=function(e){var t=this;t.initUUID((function(){t.initUserid(),t.initID(e)}))},e.prototype.setUserid=function(e,t){!this._userid&&e&&(this._userid=e,this._provider=t,c.setStorage(l.USERID,e),c.setStorage(l.PROVIDER,t))},e.prototype.removeUserid=function(){this._userid=void 0,this._provider=void 0,c.removeStorageSync(l.USERID),c.removeStorageSync(l.PROVIDER)},e.prototype.getUserId=function(){return this._userid},e.prototype.getProvider=function(){return this._provider},e.prototype.getIdType=function(){return this._idType},e.prototype.getIdTracking=function(){var e={};return this._uuid&&(e.uuid=this._uuid),this._userid&&(e.userid=this._userid),e},e}()),O=a(),E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return p(t,e),t.prototype.getOpenIdAsync=function(e,t){var n=this;O.login({success:function(i){i.code?c.request({url:l.ENDPOINT+l.GET_OPENID_URL,method:"GET",data:{key:e,code:i.code},success:function(e){if(e&&200===e.statusCode&&e.data&&e.data.data){var r=e.data.data;return n.setOpenid(r.oid),n.setUnionid(r.uid),t&&t(!0)}t&&t()},fail:function(e){r().v("wx request failed...",e),t&&t()}}):t&&t()},fail:function(){t&&t()}})},t}(I),T=(d=null,function(){return d||(d=new E),d}),A=function(){var e=null;function t(){var e=!1,t=null,n=[];this.addPageStart=function(n){n&&!e&&(t={ts:Date.now(),path:n,page_name:n},e=!0)},this.addPageEnd=function(r){if(e&&r&&t&&r===t.page_name){var i=Date.now()-t.ts;t.duration=Math.abs(i),n.push(t),t=null,e=!1}},this.get=function(){return n},this.getCurrentPage=function(){return t},this.clear=function(){n.length=0}}return function(){return e||(e=new t),e}}(),N={},k=function(){var e=null,t=[],n="";function i(){return{add:function(e,i){r().v("share origin: %o",e);var o={title:e&&e.title,path:e&&e.path&&e.path.split("?")[0],_um_sts:Date.now()};o.path&&o.path.length>1&&v(o.path,"/")&&(o.path=m(o.path,"/"));var s=e.path||"",a=T().getId();if(a){var u=n.split(","),c=(u=u.filter((function(e){return e.length>0}))).indexOf(a);c>=0&&(u=u.slice(0,c)),u.length<3&&u.push(a);var f=u.join(",");-1!==s.indexOf("?")?s+="&_um_ssrc="+f:s+="?_um_ssrc="+f;var p=Date.now();if(s+="&_um_sts="+p,i){var d=function(e){var t=[];for(var n in e)"_um_ssrc"!==n&&"_um_sts"!==n&&t.push(n+"="+e[n]);return t.join("&")}(N),l=d?d+"&_um_ssrc="+f+"&_um_sts="+p:"_um_ssrc="+f+"&_um_sts="+p;e.query=e.query?e.query+"&_um_ssrc="+f+"&_um_sts="+p:l}else e.path=s;o._um_ssrc=f,o._um_sts=p}return t.push(o),r().v("share: %o",e),e},setShareSource:function(e){n=e},clear:function(){t.length=0},get:function(){return t}}}return function(){return e||(e=new i),e}}(),b=function(e){if(e)try{return JSON.stringify(e)}catch(e){}return""},D=function(e){if(e)try{return JSON.parse(e)}catch(e){}return null},U=function(){var e=null,t="",n=null,r=!1;function o(){this.load=function(e){n?(c.removeStorage(t),e()):(t="um_cache_"+i().appKey(),c.getStorage(t,(function(i){n=D(i)||{},r=!0,c.removeStorage(t),e()})))},this.save=function(){n&&c.setStorage(t,b(n))},this.set=function(e,t){n&&(n[e]=t)},this.get=function(e){return(n||{})[e]},this.remove=function(e){n&&n[e]&&delete n[e]},this.getAll=function(){return n},this.clear=function(){n=null},this.has=function(e){return!!this.get(e)},this.isLoaded=function(){return r}}return function(){return e||(e=new o),e}}(),w=function(){var e,t,n=[],i=[];function o(e,n){var r=(e=e||{})[t];return Array.isArray(r)&&r.length?e[t]=r.concat(n):e[t]=[].concat(n),e}return function(){return e||(e={addEvent:function(e){t?(n.unshift(e),n.length>1&&(!function(){if(n.length){var e=U().get("ekvs");(function(e){var t=0;for(var n in e)Array.isArray(e[n])&&(t+=e[n].length);return t})(e)+n.length<=1e4&&(e=o(e,n),U().set("ekvs",e))}}(),n.length=0)):(r().w("session id is null: ",t),i.unshift(e))},setSessionId:function(e){if(t=e,r().v("setSessionId: ",t),Array.isArray(i)&&i.length&&t){for(var n=0;n<i.length;n++)this.addEvent(i[n]);i.length=0}},getEkvs:function(){var e=U().get("ekvs");return n&&n.length&&(e=o(e,n)),e},clear:function(){U().remove("ekvs"),n.length=0}}),e}}(),R="half_session",P="close_session",C=["access","access_subtype"],L=function(){var e=null;function t(){var e=!1,t={};return{init:function(){!function(e){var n=U().get(l.IMPRINT);n&&(t.imprint=n),t.device_type="Phone",t.sdk_version=l.IMPL_VERSION,t.appkey=i().appKey(),c.getDeviceInfo((function(e){t.device_info=e||""}));var r=c.getAppInfoSync();t.appid=r.appId,t.app_env=r.appEnv,t.app_version=r.appVersion,c.getSystemInfo((function(n){c.getNetworkInfo((function(r){var i=function(e,t){var n={};(e=e||{}).safeArea=e.safeArea||{};var r=(t=t||{}).networkType;"none"===r&&(r="unknown");var i=e.model||"",o=e.platform||"",s=e.brand||"",a=s.toLowerCase();switch(n.sdk_type=c.getSdkType(),n.platform=c.getPlatform(),n.platform_sdk_version=e.platformSDKVersion,n.platform_version=e.platformVersion,n.resolution=e.resolution,n.pixel_ratio=e.pixelRatio,n.os=o,n.font_size_setting=e.fontSizeSetting,n.device_model=i,n.device_brand=s,n.device_manufacturer=a,n.device_manuid=i,n.device_name=i,n.os_version=e.OSVersion,n.language=e.language,n.theme=e.theme,n.benchmark_level=e.benchmarkLevel,n.status_bar_height=e.statusBarHeight,n.safe_area_top=e.safeArea.top,n.safe_area_left=e.safeArea.left,n.safe_area_right=e.safeArea.right,n.safe_area_bottom=e.safeArea.bottom,n.safe_area_height=e.safeArea.height,n.safe_area_width=e.safeArea.width,n.storage=e.storage,n.screen_width=e.screenWidth,n.screen_height=e.screenHeight,n.host=e.host,r=r?r.toLowerCase():""){case"4g":n.access_subtype="LTE",n.access="4G";break;case"3g":n.access_subtype="CDMA",n.access="3G";break;case"2g":n.access_subtype="GRPS",n.access="2G";break;default:n.access=r,delete n.access_subtype}return n}(n,r);_(t,i),e&&e()}))}))}((function(){e=!0}))},isLoaded:function(){return e},get:function(){return t},getRealtimeFields:function(){var e={};return C.forEach((function(n){e[n]=t[n]})),e},setIdTracking:function(e){this.setItem("id_tracking",e)},setIdType:function(e){this.setItem("id_type",e)},setAppVersion:function(e){this.setItem("app_version",e)},setSuperProperty:function(e){t.sp||(t.sp={}),t.sp.isv=e},getSuperProperty:function(){return t&&t.sp?t.sp.isv:""},setItem:function(e,n){t[e]=n},getItem:function(e){return t[e]}}}return{instance:function(){return e||(e=t()),e}}}(),M=function(){var e=null,t=null,n=null;return function(){return e||(e={resume:function(e){var i=!1;n||(n=U().get(l.CURRENT_SESSION));var o=new Date;return t=o.getTime(),!n||!n.end_time||t-n.end_time>l.SESSION_INTERVAL?(i=!0,function(e){try{var t=(n||{}).options||{},i=_({},function(e){var t={};for(var n in e)0===n.indexOf("_um_")&&(t[n]=e[n]);return r().v("query: ",e),r().v("_um_params: ",t),t}(e.query));i.path=e.path||t.path,"gaode"!==c.getPlatform()&&(i.scene=e.scene?c.getPlatform()+"_"+e.scene:t.scene);var o=e.referrerInfo;o&&(i.referrerAppId=o.appId),r().v("session options: ",i);var s=i[l.UM_SSRC];s&&k().setShareSource(s);var a=Date.now();n={id:h(10)+a,start_time:a,options:i}}catch(e){r().e("生成新session失败: ",e)}}(e),r().v("开始新的session(%s): ",n.id,n)):r().v("延续上一次session(%s): %s ",n.id,o.toLocaleTimeString(),n),i},pause:function(){!function(){if(n){var e=new Date;n.end_time=e.getTime(),"number"!=typeof n.duration&&(n.duration=0),n.duration=n.end_time-t,U().set(l.CURRENT_SESSION,n),r().v("退出会话(%s): %s ",n.id,e.toLocaleTimeString(),n)}}()},getCurrentSessionId:function(){return(n||{}).id},getCurrentSession:function(){return n},cloneCurrentSession:function(){return g(n)}}),e}}();var j={sessions:"sn",ekvs:"e",active_user:"active_user"},V={sdk_type:"sdt",access:"ac",access_subtype:"acs",device_model:"dm",language:"lang",device_type:"dt",device_manufacturer:"dmf",device_name:"dn",platform_version:"pv",id_type:"it",font_size_setting:"fss",os_version:"ov",device_manuid:"did",platform_sdk_version:"psv",device_brand:"db",appkey:"ak",_id:"id",id_tracking:"itr",imprint:"imp",sdk_version:"sv",resolution:"rl",testToken:"ttn",theme:"t5",benchmark_level:"bml",screen_width:"sw",screen_height:"sh",status_bar_height:"sbh",safe_area_top:"sat",safe_area_left:"sal",safe_area_right:"sar",safe_area_bottom:"sab",safe_area_height:"sah",safe_area_width:"saw",pixel_ratio:"pr",storage:"s7",host:"hs"},x={uuid:"ud",unionid:"und",openid:"od",anonymousid:"nd",alipay_id:"ad",device_id:"dd",userid:"puid"};function q(e,t){var n=G(e,t);return e&&e.id_tracking&&(n[t.id_tracking||"id_tracking"]=G(e.id_tracking,x)),n}function G(e,t){var n={};for(var r in e)t[r]?n[t[r]]=e[r]:n[r]=e[r];return n}function F(e,t){var n={};if(e)for(var r in e)e[r]&&(n[t[r]]=e[r]);return n}var H="";function K(){return H}var Y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",J=function(e){for(var t={},n=0,r=e.length;n<r;n++)t[e.charAt(n)]=n;return t}(Y),X=String.fromCharCode,B=function(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?X(192|t>>>6)+X(128|63&t):X(224|t>>>12&15)+X(128|t>>>6&63)+X(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return X(240|t>>>18&7)+X(128|t>>>12&63)+X(128|t>>>6&63)+X(128|63&t)},z=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,Q=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[Y.charAt(n>>>18),Y.charAt(n>>>12&63),t>=2?"=":Y.charAt(n>>>6&63),t>=1?"=":Y.charAt(63&n)].join("")},W=function(e){return function(e){return e.replace(z,B)}(e).replace(/[\s\S]{1,3}/g,Q)},Z=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),$=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return X(55296+(t>>>10))+X(56320+(1023&t));case 3:return X((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return X((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},ee=function(e){var t=e.length,n=t%4,r=(t>0?J[e.charAt(0)]<<18:0)|(t>1?J[e.charAt(1)]<<12:0)|(t>2?J[e.charAt(2)]<<6:0)|(t>3?J[e.charAt(3)]:0),i=[X(r>>>16),X(r>>>8&255),X(255&r)];return i.length-=[0,0,2,1][n],i.join("")},te=function(e,t){return t?W(String(e)).replace(/[+\/]/g,(function(e){return"+"==e?"-":"_"})).replace(/=/g,""):W(String(e))},ne=function(e){return function(e){return function(e){return e.replace(/[\s\S]{1,4}/g,ee)}(e).replace(Z,$)}(String(e).replace(/[-_]/g,(function(e){return"-"==e?"+":"/"})).replace(/[^A-Za-z0-9\+\/]/g,""))},re=new function(){var e="",t=this;this.set=function(t){e=t},this.get=function(){return e},this.getImpObj=function(){return D(ne(e))},this.getItem=function(e){var n=t.getImpObj();return n&&n[e]||""},this.load=function(){e=U().get(l.IMPRINT)},this.save=function(){e&&U().set(l.IMPRINT,e)}};function ie(e,t,n,i){L.instance().setIdType(T().getIdType()),L.instance().setIdTracking(T().getIdTracking());var o=T().getUserId();o&&e.analytics&&(e.analytics.active_user={puid:o,provider:T().getProvider()});var s=g(L.instance().get());e.header=_(s,e.header,{ts:Date.now(),testToken:K(),traceId:h(10)+Date.now()+h(9)});var a=function(e){return{h:q(e.header,V),a:F(e.analytics,j)}}(e),u=b(a),f={url:l.ENDPOINT+l.LOG_URL,method:"POST",data:te(u),success:function(i){var o=i.code||i.status||i.statusCode;200===o||413===o?(r().i("数据发送成功: ",e,u),function(e){e&&(L.instance().setItem(l.IMPRINT,e),re.set(e),re.save(),r().v("imprint: ",re.getImpObj()),re.getItem("ttn_invalid")&&(H=""))}((i.data||{}).imprint),"function"==typeof t&&t(i)):(r().w("数据发送失败: ",u),"function"==typeof n&&n())},fail:function(e){r().w("超时: ",u),"function"==typeof n&&n()},complete:function(){"function"==typeof i&&i()}};c.request(_(f,{header:{"content-type":"text/plain","Msg-Type":c.getSdkType()+"/json"}}))}function oe(e){var t=e,n=[];this.enqueue=function(e){"number"==typeof t&&this.size()>=t&&this.dequeue(),n.push(e)},this.dequeue=function(){return n.shift()},this.front=function(){return n[0]},this.isEmpty=function(){return 0===n.length},this.clear=function(){n.length=0},this.size=function(){return n.length},this.items=function(){return n},this.print=function(){console.log(n.toString())}}var se=function(){var e=null,t=!1,n=[],i=new oe(50);function o(e,t,n){if(L.instance().isLoaded()){t=t||{};var r=function(e){var t=null;switch(e){case R:t=function(){var e=null,t=M().cloneCurrentSession();return t&&(e={header:{st:"1"},analytics:{sessions:[t]}}),e}();break;case P:t=function(){var e=null,t={},n=M().cloneCurrentSession();if(n){var r=A().get(),i=k().get();Array.isArray(r)&&r.length&&(n.pages=g(r)),Array.isArray(i)&&i.length&&(n.shares=g(i)),A().clear(),k().clear(),t.sessions=[n]}var o=w().getEkvs();return o&&(t.ekvs=g(o),w().clear()),(t.sessions||t.ekvs)&&(e={analytics:t}),e}();break;case"ekv":t=function(){var e=null,t=w().getEkvs();return t&&(e={analytics:{ekvs:g(t)}},w().clear()),e}()}return t}(e);if(r){var s=L.instance().getRealtimeFields();r.header=_({},r.header,s),r.noCache=t.noCache,i.enqueue(r)}"function"==typeof n&&n()}else setTimeout((function(){o(e,t,n)}),100)}function s(e){var t=i.front();t?ie(t,(function(){i.dequeue(),s(e)}),(function(){var t=i.dequeue();t&&!t.noCache&&n.push(t),s(e)})):(n.forEach((function(e){i.enqueue(e)})),n.length=0,e())}function a(e){T().getId()?t?r().i("队列正在发送中"):(t=!0,s((function(){t=!1,"function"==typeof e&&e()}))):(r().i("获取id标识失败，暂缓发送"),"function"==typeof e&&e())}function u(){this.send=function(e,t,n){e?this.add(e,t,(function(){a(n)})):a(n)},this.add=function(e,t,n){o(e,t,n)},this.load=function(){var e=U().get(l.REQUESTS);e&&e.length&&e.forEach((function(e){i.enqueue(e)})),U().remove(l.REQUESTS)},this.save=function(){U().set(l.REQUESTS,g(i.items())),i.clear()}}return function(){return e||(e=new u),e}}(),ae=function(){var e=null,t=null;function n(){function e(e){if(e&&"object"==typeof e){var t=U().get(l.USER_INFO);return t&&y(e,t)||function(e,t){var n=i().appKey(),o=c.getSdkType(),s=T().getId(),a=T().getIdType();if(n&&o&&s&&a){var u={ak:i().appKey(),sdt:c.getSdkType(),uin:e.nickName,uia:e.avatar||e.avatarUrl,uig:e.gender,uit:e.country,uip:e.province,uic:e.city,uil:e.language,id:T().getId(),it:T().getIdType(),age:e.age,cln:e.constellation},f=JSON.stringify(u);f=te(f),c.request({url:l.ENDPOINT+l.USERINFO_URL,method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:"ui="+f,success:function(n){r().v("用户信息上传成功: ",e),t&&t(n&&n.data&&200===n.data.code)},fail:function(){r().e("用户信息上传失败: ",e),t&&t(!1)}})}}(e,(function(t){t&&U().set(l.USER_INFO,e)})),!0}return!1}this.setUserInfo=function(e){t=e},this.update=function(){e(t)||c.getUserInfo((function(t){e(t)}))}}return function(){return e||(e=new n),e}}();function ue(e,t){this.id=e,this.ts=Date.now();var n=typeof t;if("string"===n&&t)this[e]=t;else if("object"===n)for(var r in t)({}).hasOwnProperty.call(t,r)&&(this[r]=t[r])}function ce(){var e=!1,t=!1,n=0;this.init=function(t){r().v("sdk version: "+l.IMPL_VERSION),e?r().v("Lib重复实例化"):U().load((function(){r().v("cache初始化成功: ",U().getAll()),T().setUseOpenid&&T().setUseOpenid(i().useOpenid()),T().init((function(){L.instance().init(),r().v("Header初始化成功")})),e=!0,"function"==typeof t&&t(),r().tip("SDK集成成功")}))},this.resume=function(n){var o;e&&!t&&(r().v("showOptions: ",n),t=!0,i().enableVerify()&&n&&n.query&&(o=n.query._ttn,H=o||H),this._resume(n))},this._resume=function(e){se().load();var t=M().resume(e),n=M().getCurrentSessionId();function o(e,t){T().getId()||e<=0||T().getOpenIdAsync(i().appKey(),(function(n){n?(r().v("获取id成功"),se().send()):(r().v("获取openid失败,启动重试,剩余可用次数",e-1),setTimeout((function(){o(e-1,t)}),t))}))}w().setSessionId(n),t&&se().add(R,{},(function(){T().setUseOpenid&&T().setUseOpenid(i().useOpenid()),i().useOpenid()&&i().autoGetOpenid()&&!T().getId()?(r().v("get id async"),o(10,3e3)):(r().v("session auto send"),se().send())}))},this.pause=function(o){e&&(t=!1,n=0,M().pause(),i().uploadUserInfo()&&ae().update(),se().send(P,{},(function(){se().save(),U().save(),r().v("cache save success"),"function"==typeof o&&o()})))},this.setOpenid=function(e){r().v("setOpenId: %s",e),T().setOpenid(e),se().send()},this.setUnionid=function(e){r().v("setUnionid: %s",e),T().setUnionid(e)},this.setUserid=function(e,t){r().v("setUserid: %s",e,t),T().setUserid(e,t)},this.removeUserid=function(){r().v("removeUserid"),T().removeUserid()},this.setUserInfo=function(e){r().v("setUserInfo: %s",e),ae().setUserInfo(e)},this.setAnonymousid=function(e){r().v("setAnonymousId: %s",e),T().setAnonymousid(e),se().send()},this.setAppVersion=function(e){e&&"string"!=typeof e?r().w("setAppVersion方法只接受字符串类型参数"):L.instance().setAppVersion(e)},this.setAlipayUserid=function(e){e&&"string"!=typeof e?r().w("setAlipayUserid方法只接受字符串类型参数"):(r().v("setAlipayUserid: %s",e),T().setAlipayUserid(e))},this.setDeviceId=function(e){if("string"==typeof e)return T().setDeviceId(e),e},this.setSuperProperty=function(e){if(e&&"string"!=typeof e)r().w("超级属性只支持字符串类型");else{var t=this;L.instance().getSuperProperty()!==e&&(L.instance().setSuperProperty(e),t.pause((function(){t.resume()})))}},this.trackEvent=function(t,i){if(e&&(r().v("event: ",t,i),function(e,t){if(!e||"string"!=typeof e)return r().e('please check trackEvent id. id should be "string" and not null'),!1;var n=["id","ts","du"],i={};if(n.forEach((function(e){i[e]=1})),i[e])return r().e("eventId不能与以下保留字冲突: "+n.join(",")),!1;if(e.length>l.MAX_EVENTID_LENGTH)return r().e("The maximum length of event id shall not exceed "+l.MAX_EVENTID_LENGTH),!1;if(t&&("object"!=typeof t||Array.isArray(t))&&"string"!=typeof t)return r().e("please check trackEvent properties. properties should be string or object(not include Array)"),!1;if("object"==typeof t){var o=0;for(var s in t)if({}.hasOwnProperty.call(t,s)){if(s.length>l.MAX_PROPERTY_KEY_LENGTH)return r().e("The maximum length of property key shall not exceed "+l.MAX_PROPERTY_KEY_LENGTH),!1;if(o>=l.MAX_PROPERTY_KEYS_COUNT)return r().e("The maximum count of properties shall not exceed "+l.MAX_PROPERTY_KEYS_COUNT),!1;if(i[s])return r().e("属性中的key不能与以下保留字冲突: "+n.join(",")),!1;o+=1}}return!0}(t,i))){var o=new ue(t,i);w().addEvent(o);var s=!!K(),a=s?0:l.EVENT_SEND_DEFAULT_INTERVAL,u=Date.now();(function(e,t){return"number"!=typeof n||"number"!=typeof t||n<=0||e-n>t})(u,a)&&(n=u,se().send("ekv",{noCache:s},(function(){})))}},this.trackShare=function(t){if(e)try{c.getSdkType().indexOf("game")>-1?(t=k().add(t,!0),r().v("shareQuery: ",t)):(t=k().add(t,!1),r().v("sharePath: ",t.path))}catch(e){r().v("shareAppMessage: ",e)}return t},this.trackPageStart=function(t){e&&A().addPageStart(t)},this.trackPageEnd=function(t){e&&A().addPageEnd(t)},this.onShareAppMessage=function(e){var t=this;c.onShareAppMessage((function(){return t.trackShare(e())}))},this.shareAppMessage=function(e){this.trackShare(e),c.shareAppMessage(e)}}var fe=[];function pe(){}pe.prototype={createMethod:function(e,t,n){try{e[t]=n&&n[t]?function(){return n[t].apply(n,arguments)}:function(){fe.push([t,[].slice.call(arguments)])}}catch(e){r().v("create method errror: ",e)}},installApi:function(e,t){try{var n,i,o="resume,pause,trackEvent,trackPageStart,trackPageEnd,trackShare,setUserid,setOpenid,setUnionid,onShareAppMessage,shareAppMessage,setUserInfo".split(",");for(n=0,i=o.length;n<i;n++)this.createMethod(e,o[n],t);if(t)for(n=0,i=fe.length;n<i;n++){var s=fe[n];try{t[s[0]].apply(t,s[1])}catch(e){r().v("impl[v[0]].apply error: ",s[0],e)}}}catch(e){r().v("install api errror: ",e)}}};var de=[l.ENDPOINT,l.ENDPOINTB];function le(e,t){var n,i;if(0===e||1===e&&t?n=l.ENDPOINT:2===e&&t?n=l.ENDPOINTB:t&&(n=de[e]),e>=de.length||t)return t&&(i=n,l.ENDPOINT=i),t&&r().v("命中可用服务",n),!t&&r().tip_w("未命中可用服务"),!1;c.request({url:l.ENDPOINT+"/uminiprogram_logs/ckdh",success:function(t){200===(t.code||t.status||t.statusCode)&&t.data&&200===t.data.code?le(e+1,!0):le(e+1,!1)},fail:function(){le(e+1,!1)}})}var he=function(e){l.ENDPOINTB&&setTimeout((function(){le(0,!1)}),e)},ge=new pe,ve=e("default",{_inited:!1,_log:r(),preinit:function(e){if(e&&"object"==typeof e)for(var t in e)l[t]=e[t];return l},use:function(e,t){return e&&S(e.install)?e.install(ve,t):S(e)&&e(ve,t),ve},messager:s,init:function(e){if(this._inited)r().v("已经实例过，请避免重复初始化");else if(e)if(e.appKey){"boolean"!=typeof e.useOpenid&&(e.useOpenid=!0),i().set(e),r().setDebug(e.debug),this._inited=!0;var t=this;s.emit(s.messageType.CONFIG_LOADED,e);try{var n=new ce;if(r().v("成功创建Lib对象"),!c.getContext())return;n.init((function(){r().v("Lib对象初始化成功"),ge.installApi(t,n),r().v("安装Lib接口成功"),s.emit(s.messageType.UMA_LIB_INITED,e)})),he(3e3)}catch(e){r().w("创建Lib对象异常: "+e)}}else r().err("请确保传入正确的appkey");else r().err("请正确设置相关信息！")}});try{ge.installApi(ve,null)}catch(n){r().w("uma赋值异常: ",n)}var _e={},ye=Array.isArray;_e.isArray=ye||function(e){return"[object Array]"===toString.call(e)},_e.isObject=function(e){return e===Object(e)&&!_e.isArray(e)},_e.isEmptyObject=function(e){if(_e.isObject(e)){for(var t in e)if(hasOwnProperty.call(e,t))return!1;return!0}return!1},_e.isUndefined=function(e){return void 0===e},_e.isString=function(e){return"[object String]"===toString.call(e)},_e.isDate=function(e){return"[object Date]"===toString.call(e)},_e.isNumber=function(e){return"[object Number]"===toString.call(e)},_e.each=function(e,t,n){if(null!=e){var r={},i=Array.prototype.forEach;if(i&&e.forEach===i)e.forEach(t,n);else if(e.length===+e.length){for(var o=0,s=e.length;o<s;o++)if(o in e&&t.call(n,e[o],o,e)===r)return}else for(var a in e)if(hasOwnProperty.call(e,a)&&t.call(n,e[a],a,e)===r)return}},_e.buildQuery=function(e,t){var n,r,i=[];return void 0===t&&(t="&"),_e.each(e,(function(e,t){n=encodeURIComponent(e.toString()),r=encodeURIComponent(t),i[i.length]=r+"="+n})),i.join(t)},_e.JSONDecode=function(e){if(e){try{return JSON.parse(e)}catch(e){console.error("JSONDecode error",e)}return null}},_e.JSONEncode=function(e){try{return JSON.stringify(e)}catch(e){console.error("JSONEncode error",e)}};var me=Object.create(null);function Se(e){r().v("开始构建 fetch body"),c.getSystemInfo((function(t){c.getNetworkInfo((function(n){var r=(n=n||{}).networkType;r="none"===r?"unknown":r.toUpperCase(),me.access=r,function(e,t){var n=e.brand||"";if(me.deviceType="Phone",me.sdkVersion="2.7.2",me.appkey=i().appKey(),me.sdkType=c.getSdkType(),me.umid=T().getId(),e){me.language=e.language||"",me.os=e.OS,me.osVersion=e.OSVersion,me.deviceName=e.deviceName,me.platformVersion=e.platformVersion,me.platformSdkVersion=e.platformSDKVersion,me.deviceBrand=n;var r=e.resolution.split("*");_e.isArray(r)&&(me.resolutionHeight=Number(r[0]),me.resolutionWidth=Number(r[1]))}!function(e){e&&(me.installTime=e.install_datetime&&Date.parse(e.install_datetime),me.scene=e.install_scene,me.channel=e.install_channel,me.campaign=e.install_campaign)}(re.getImpObj()),t&&t(me)}(t,e)}))}))}var Ie=Object.create(null),Oe=null,Ee=!1,Te={minFetchIntervalSeconds:43200};function Ae(e){e&&_e.each(e,(function(e){Ie[e.k]=e}))}function Ne(){var e=this;this.STORAGE_NAME=null,s.once(s.messageType.CONFIG_LOADED,(function(t){r().v("云配初始化开始..."),e.init(t)}))}Ne.prototype={setDefaultValues:function(e){Ee&&_e.isObject(e)&&_e.each(e,(function(e,t){Ie[t]&&Ie[t].v||(Ie[t]={v:e})}))},getValue:function(e){r().v("从配置项中读取 value, 当前配置为: ",Ie),r().v("待读取的 key : ",e);try{if(!Ee)return;var t=Ie[e]||{};return r().v("读取相应配置ing..., 结果为: ",t),_e.isNumber(t.e)&&_e.isNumber(t.g)&&(r().v("读取到相应配置, 开始数据上报..."),function(e){var t={appkey:i().appKey(),sdkType:c.getSdkType(),expId:e&&e.e,groupId:e&&e.g,clientTs:Date.now(),key:e&&e.k,value:e&&e.v,umid:T().getId()};try{c.request({url:"https://pslog.umeng.com/mini_ablog",method:"POST",data:[t],success:function(e){e&&200===e.statusCode?r().v("上传数据成功",t):r().w("ablog 请求成功, 返回结果异常 ",e)},fail:function(e){r().w("ablog 请求数据错误 ",t,e)}})}catch(e){r().w("urequest 调用错误",e)}}(t)),t.v}catch(t){r().w("getValue error, key: ",e)}},active:function(e){try{if(!Ee)return;var t,n;e&&e.params&&(t=e.params),e&&e.callback&&(n=e.callback),r().v("激活配置项: ",t),t?(r().v("本地已缓存的配置项: ",Ie),Ae(t),r().v("合并后的配置项: ",Ie),n&&n(Ie),r().v("active 结束")):(r().v("配置项为空!! 读取本地配置..."),c.getStorage(this.STORAGE_NAME,(function(e){e?(Ae((e=_e.JSONDecode(e)||{}).params),r().v("当前本地配置项为: ",Ie),n&&n(Ie),r().v("active 结束")):r().v("当前本地配置项为空, 退出激活")})))}catch(e){r().w("SDK active 错误",e)}},init:function(e){e.appKey&&(Oe=e.appKey,this.STORAGE_NAME="um_remote_config_{{"+Oe+"}}"),Oe?Ee?r().w("SDK 已经初始化, 请避免重复初始化"):(Ee=!0,this.setOptions(e),this.active()):r().err("请检查您的小程序 appKey, appKey 不能为空")},setOptions:function(e){if(_e.isObject(e)){var t=e.minFetchIntervalSeconds;_e.isNumber(t)&&(Te.minFetchIntervalSeconds=Math.max(t,5))}},fetch:function(e){if(Ee&&this.STORAGE_NAME){var t,n;e&&e.active&&(t=e.active),e&&e.callback&&(n=e.callback);var i=this;c.getStorage(this.STORAGE_NAME,(function(e){r().v("开始读缓存 data is ",e),(e=_e.JSONDecode(e)||{}).params&&e.ts&&Date.now()-e.ts<1e3*Te.minFetchIntervalSeconds?(r().v("缓存数据存在, 并且本次触发时间距离上次fetch触发时间未超过 fetch 时间间隔, 无需 fetch"),n&&n(e.params)):Se((function(e){r().v("缓存数据不存在, 构建 fetch body :",e);try{c.request({url:"https://ucc.umeng.com/v1/mini/fetch",method:"POST",data:e,success:function(e){if(e&&200===e.statusCode&&e.data&&e.data.cc){r().v("fetch 请求成功, 响应数据: ",e.data);var o=Object.create(null);_e.each(e.data.cc,(function(e){o[e.k]=e}));var s={ts:Date.now(),params:o};r().v("开始缓存 fetch 请求的云配置结果..."),c.setStorage(i.STORAGE_NAME,_e.JSONEncode(s),(function(e){r().v("缓存云配置成功, 缓存数据为: ",s),r().v("缓存云配置成功, 成功消息为: ",e),r().v("云配拉取数据是否自动激活: ",t),e&&t&&(r().v("激活云配置..."),i.active({params:o,callback:n}))}))}else r().w("fetch 请求成功,返回结果异常 ",e.data),n&&n()},fail:function(t){r().w("fetch请求数据错误 ",e,t),n&&n()}})}catch(e){r().w("urequest调用错误",e)}}))}))}}};var ke={install:function(e,t){return e.rc||(e.rc=new Ne),e.messager.once(e.messager.messageType.CONFIG_LOADED,(function(){e._log.v("plugin rc installed")})),e.rc}},be="_um",De="revenue",Ue="stage",we="level",Re="running",Pe="end",Ce="init",Le="set",Me=[be,Ue,"start"].join(".");function je(e){var t={};for(var n in e){var r=e[n];if("object"==typeof r)for(var i in r)t[n+"."+i]=r[i];else t[n]=r}return t}var Ve={install:function(e,t){e.revenue=function(t){e.trackEvent([be,De,t.group].join("."),je(t))};var n=0;return e.stage={onStart:function(t){n=Date.now(),e.trackEvent(Me,je(t))},onEnd:function(t){"number"!=typeof t._um_sdu&&(t._um_sdu=0!==n?Date.now()-n:0),e.trackEvent([be,Ue,Pe,t.event].join("."),je(t))},onRunning:function(t){e.trackEvent([be,Ue,Re,t.event].join("."),je(t))}},e.level={onInitLevel:function(t){e.trackEvent([be,we,Ce].join("."),je(t))},onSetLevel:function(t){e.trackEvent([be,we,Le].join("."),je(t))}},e.messager.once(e.messager.messageType.CONFIG_LOADED,(function(){e._log.v("plugin game-ext installed")})),e}},xe=c.getContext();void 0!==xe&&(xe.onShow((function(e){var t;r().v("game onShow: ",e),t=e.query,N=t,ve.resume(e,!0)})),xe.onHide((function(){r().v("game onHide"),ve.pause()})));var qe=ve.init;ve.init=function(e){e&&e.useOpenid&&(r().tip_w(r().repeat("!")),r().tip_w("您选择了使用openid进行统计，请确保使用setOpenid回传openid或通过设置autoGetOpenid为true，并在友盟后台设置secret由友盟帮您获取"),r().tip_w(r().repeat("!"))),ve.resume({}),qe.call(ve,e)},ve.use(ke),ve.use(Ve),xe&&(xe.uma=ve),t._RF.pop()}}}));

System.register("chunks:///_virtual/ExplPref.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,n,o,r,i;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,r=t.Label,i=t.Component}],execute:function(){var s;n._RF.push({},"adbaeTQE4dPsLkPo96VZgzc","ExplPref",void 0);var a=o.ccclass;o.property,t("ExplPref",a("ExplPref")(s=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var o=n.prototype;return o.start=function(){},o.setData=function(t){this.setLabel("bg/idiom",t.word+" ["+t.pinyin+"]"),this.setLabel("bg/expl",""+t.explanation)},o.setLabel=function(t,e){this.node.getChildByPath(t).getComponent(r).string=e},n}(i))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/User.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(i){"use strict";var n,t,e;return{setters:[function(i){n=i.createClass,t=i.defineProperty},function(i){e=i.cclegacy}],execute:function(){e._RF.push({},"b708bL8Hv9ES6Ke+Rqc0ZFE","User",void 0);i("User",function(){function i(){var i;t(this,"_jingyan",0),t(this,"_jinbi",100);try{i=JSON.parse(localStorage.user)}catch(i){}i&&void 0!==i.jingyan?(this._jingyan=i.jingyan,this._jinbi=i.jinbi):this._store()}var e=i.prototype;return e.pass=function(i,n){return console.log("User.pass",i,n),this.jingyan+=n.jingyan,this.jinbi+=n.jinbi,n},e._store=function(){localStorage.user=JSON.stringify(this.storeData)},n(i,[{key:"storeData",get:function(){return{jingyan:this._jingyan,jinbi:this._jinbi}}},{key:"jingyan",get:function(){return this._jingyan},set:function(i){this._jingyan=i,this._store()}},{key:"jinbi",get:function(){return this._jinbi},set:function(i){this._jinbi=i,this._store()}}]),i}());e._RF.pop()}}}));

System.register("chunks:///_virtual/util.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"d1258AHY6lL9LpHV8SW+ABL","util",void 0);t("util",function(){function t(){}return t.processData=function(t){var e={};t.forEach((function(t){t.blanks.forEach((function(t){e[t]=!0}))}));for(var r=[],n=1;n<=8;n++)for(var s=1;s<=10;s++){var i=e[n+"_"+s],u=this.getWordByAxis(t,n,s),o={type:i?"blank":u?"char":"empty"};i?o._char=u:o.char=u,r.push(o)}return{words:t,chars:r}},t.__getWordsByAxis=function(t,e,r){return t.filter((function(t){return t.axis.includes(e+"_"+r)}))},t.getWordByAxis=function(t,e,r){var n=this.__getWordsByAxis(t,e,r);if(n.length>0){var s=n[0];return s.word.split("")[s.axis.indexOf(e+"_"+r)]}return""},t.formatDate=function(t,e){var r={"M+":t.getUTCMonth()+1,"d+":t.getUTCDate(),"h+":t.getUTCHours(),"m+":t.getUTCMinutes(),"s+":t.getUTCSeconds(),"q+":Math.floor((t.getUTCMonth()+3)/3),S:t.getUTCMilliseconds()};for(var n in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getUTCFullYear()+"").substr(4-RegExp.$1.length))),r)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?r[n]:("00"+r[n]).substr((""+r[n]).length)));return e},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/Grid.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./storage.ts","./enums.ts","./AudioManagerLevel.ts","./config.ts"],(function(t){"use strict";var e,n,i,r,s,o,a,c,l,u,h,d,p,f,y,g,m,v,b,k;return{setters:[function(t){e=t.inheritsLoose,n=t.defineProperty,i=t.assertThisInitialized,r=t.createClass,s=t.asyncToGenerator},function(t){o=t.cclegacy,a=t._decorator,c=t.Input,l=t.Vec3,u=t.UIOpacity,h=t.Animation,d=t.Label,p=t.Color,f=t.Component,y=t.instantiate,g=t.tween},function(t){m=t.storage},function(t){v=t.GridState},function(t){b=t.AudioManagerLevel},function(t){k=t.config}],execute:function(){var C;o._RF.push({},"deaf6H74/9NZ4R3YTYY0wpc","Grid",void 0);var _=a.ccclass;a.property,t("Grid",_("Grid")(C=function(t){function o(){for(var e,r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return e=t.call.apply(t,[this].concat(s))||this,n(i(e),"data",void 0),n(i(e),"col",void 0),n(i(e),"row",void 0),n(i(e),"levelCtrl",null),n(i(e),"relTopGrid",void 0),n(i(e),"relBottomGrid",void 0),n(i(e),"isBottom",!1),n(i(e),"_bgName",void 0),n(i(e),"_state",v.DEFAULT),n(i(e),"_selected",!1),n(i(e),"_bottomFilled",!1),e}e(o,t);var a=o.prototype;return a.start=function(){this.bindEvents()},a.bindEvents=function(){var t=this;this.node.on(c.EventType.TOUCH_END,(function(e){t.data&&"empty"!==t.Type&&(b.instance.playClickBtn(),t.isBottom?t.bottomFilled?t.relTopGrid.resetWord():t.levelCtrl.fillWord(t):t.levelCtrl.setSelected(t))}))},a.setData=function(t){switch(this.data=t,this.updateType(),this.Type){case"char":this.setChar(t.char);break;case"blank":this.setChar("");break;case"bottom_blank":this.setChar(t._char)}},a.setBG=function(t){this._bgName=t;var e=this.node.getChildByPath("box/bgs");e.children.forEach((function(t){t.active=!1})),e.getChildByName(t).active=!0},a.updateType=function(){if("right"!==this._bgName)switch(this.setBG(this.Type),this.Type){case"bottom_blank":this.node.scale=new l(1.5,1.5,1)}},a.setOpacity=function(t){this.node.getComponent(u).opacity=255*t},a.setChar=function(t){null!=t&&(this.Label.string=t)},a.fillWord=function(){var t=s(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.bottomFilled=!0,e.relTopGrid=this,t.next=4,this.playFillWordAni(e);case 4:return t.next=6,this.resetWord();case 6:this.relBottomGrid=e,this.setChar(e.data._char),m.setFillRelBottom(this.axis,e.node.getSiblingIndex());case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),a.resetWord=function(){var t=s(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.canSelect&&null!=this.relBottomGrid){t.next=2;break}return t.abrupt("return");case 2:return this.levelCtrl.resetError(this),this.setChar(""),this.levelCtrl.setSelected(this),t.next=7,this.playResetWordAni(this.relBottomGrid);case 7:if(this.canSelect&&null!=this.relBottomGrid){t.next=9;break}return t.abrupt("return");case 9:this.relBottomGrid.relTopGrid=null,this.relBottomGrid.bottomFilled=!1,this.relBottomGrid=null,m.setFillRelBottom(this.axis,void 0);case 13:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a.playAni=function(t){this.node.getChildByPath("box").getComponent(h).play(t)},a.playGridAni=function(){var t=s(regeneratorRuntime.mark((function t(e,n,i,r){var s=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===r&&(r=.2),t.abrupt("return",new Promise((function(t){var o=s.node.scene.getChildByPath("Canvas/game/anis"),a=y(e.node),c=a.getComponent(u);for(var l in c.opacity=255,n)a[l]=n[l];o.addChild(a),g(a).to(r,i,{easing:"quadOut"}).call((function(e){o.removeChild(a),t(e)})).start()})));case 2:case"end":return t.stop()}}),t)})));return function(e,n,i,r){return t.apply(this,arguments)}}(),a.playFillWordAni=function(){var t=s(regeneratorRuntime.mark((function t(e){var n,i,r,s,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.node.position,i=n.x,r=n.y,s=n.z,o=new l(i,r+570,s),t.next=4,this.playGridAni(e,{},{position:o,scale:new l(1,1,1)});case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),a.playResetWordAni=function(){var t=s(regeneratorRuntime.mark((function t(e){var n,i,r,s,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.node.position,i=n.x,r=n.y,s=n.z,o=new l(i,r+570,s),t.next=4,this.playGridAni(e,{position:o,scale:new l(1,1,1)},{position:e.node.position,scale:new l(1.5,1.5,1)});case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r(o,[{key:"index",get:function(){return this.col-1+(this.row-1)*k.grids.cols}},{key:"axis",get:function(){return this.row+"_"+this.col}},{key:"Label",get:function(){return this.node.getChildByPath("box/char").getComponent(d)}},{key:"isFilled",get:function(){return""!==this.Label.string}},{key:"isFillRight",get:function(){switch(this.data.type){case"blank":return this.Label.string===this.data._char;default:return!0}}},{key:"canSelect",get:function(){return"blank"===this.Type&&"right"!==this._bgName}},{key:"State",get:function(){return this._state},set:function(t){switch(this._state=t,m.setFillState(this.axis,this._state),this._state){case v.DEFAULT:this.Label.color=p.BLACK;break;case v.RIGHT:this.setBG("right"),this.Label.color=p.WHITE;break;case v.ERROR:this.Label.color=p.RED}}},{key:"Type",get:function(){var t=this.data.type;return this.isBottom&&(t="bottom_blank"),t}},{key:"Selected",get:function(){return this._selected},set:function(t){this._selected=t,m.currentSelectedAxis=this.axis,t?this.setBG("selected"):this.updateType()}},{key:"bottomFilled",get:function(){return this._bottomFilled},set:function(t){this._bottomFilled=t,this.setOpacity(t?.5:1)}}]),o}(f))||C);o._RF.pop()}}}));

System.register("chunks:///_virtual/Word.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./enums.ts"],(function(t){"use strict";var r,i,e,n,a;return{setters:[function(t){r=t.defineProperty},function(t){i=t.cclegacy,e=t.tween,n=t.Vec3},function(t){a=t.GridState}],execute:function(){i._RF.push({},"e6416oXwZ9HtL3P3/uqW5Xe","Word",void 0);t("Word",function(){function t(t){r(this,"_gridsMap",void 0),this._gridsMap=t}var i=t.prototype;return i.isAllFilled=function(t){var r=this;return t.axis.every((function(t){return r._gridsMap[t].isFilled}))},i.checkFillResult=function(t){var r=this;return t.axis.every((function(t){return r._gridsMap[t].isFillRight}))},i.checkLevelPass=function(){return Object.values(this._gridsMap).every((function(t){return t.isFillRight}))},i.playRightAni=function(t){var r=this;t.axis.forEach((function(t,i){var s=r._gridsMap[t];s.State=a.RIGHT,s.relBottomGrid&&s.relBottomGrid.setChar("");var o=.08;e(s.node).delay(o*i).to(o,{scale:new n(1.3,1.3,1)}).start().to(o,{scale:new n(1,1,1)}).start()}))},i.playErrorAni=function(t){var r=this;t.axis.forEach((function(t){var i=r._gridsMap[t];"blank"===i.data.type&&(i.State=a.ERROR),i.playAni("error")}))},i.resetError=function(t){var r=this;t.forEach((function(t){t.axis.forEach((function(t){var i=r._gridsMap[t];"blank"===i.data.type&&(i.State=a.DEFAULT)}))}))},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/storage.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,a,n;return{setters:[function(t){e=t.createClass},function(t){a=t.cclegacy,n=t.sys}],execute:function(){a._RF.push({},"f584eSUDntGLaiSlh/FmzpS","storage",void 0);var l=t("storage",function(){function t(){}return t.setStorage=function(t,e,a){var l;try{l=JSON.parse(n.localStorage.getItem(t))}catch(t){}(l=l||{})[e]=a,n.localStorage.setItem(t,JSON.stringify(l))},t.getStorage=function(t,e){var a;try{a=JSON.parse(n.localStorage.getItem(t))}catch(t){}return(a||{})[e]},t._setLevelStatusData=function(e,a){var n=t.levelStatusData;n[e]=a,t.levelStatusData=n},t._setFillMap=function(e,a,n){var l=t.levelStatusData;l.fill_map||(l.fill_map={}),l.fill_map[e]||(l.fill_map[e]={}),l.fill_map[e][a]=n,t.levelStatusData=l},t.setFillRelBottom=function(e,a){t._setFillMap(e,"bottom_idx",a)},t.setFillState=function(e,a){t._setFillMap(e,"state",a)},e(t,null,[{key:"currentLevel",get:function(){n.localStorage.getItem("current_level")||n.localStorage.setItem("current_level","1");var t=Number(n.localStorage.getItem("current_level"));return(t<=0||t>250)&&(t=1),t},set:function(t){n.localStorage.setItem("current_level",t.toString())}},{key:"levelStatusData",get:function(){var t;try{t=JSON.parse(n.localStorage.getItem("level_status_data"))}catch(t){}return t||{}},set:function(t){n.localStorage.setItem("level_status_data",JSON.stringify(t))}},{key:"bottomData",get:function(){return t.levelStatusData.bottom_data},set:function(e){t._setLevelStatusData("bottom_data",e)}},{key:"levelStartTime",get:function(){return t.levelStatusData.start_time},set:function(e){t._setLevelStatusData("start_time",e)}},{key:"currentSelectedAxis",get:function(){return t.levelStatusData.current_axis},set:function(e){t._setLevelStatusData("current_axis",e)}},{key:"FillMap",get:function(){return t.levelStatusData.fill_map||{}}},{key:"AudioSetting",get:function(){return new r}}]),t}()),r=function(){function t(){}return e(t,[{key:"music",get:function(){return!1!==l.getStorage("setting","music")},set:function(t){l.setStorage("setting","music",t)}},{key:"sound",get:function(){return!1!==l.getStorage("setting","sound")},set:function(t){l.setStorage("setting","sound",t)}}]),t}();a._RF.pop()}}}));

System.register("chunks:///_virtual/Explain.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./storage.ts","./ExplPref.ts"],(function(e){"use strict";var t,n,i,r,l,o,a,s,c,u,p,v,f,h,d,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,l=e.defineProperty,o=e.createClass},function(e){a=e.cclegacy,s=e._decorator,c=e.Prefab,u=e.JsonAsset,p=e.instantiate,v=e.Label,f=e.director,h=e.Component},function(e){d=e.storage},function(e){b=e.ExplPref}],execute:function(){var x,y,g,m,L,P,C,E,w;a._RF.push({},"f8c84WWrtpAO64Ee/u+7L+s","Explain",void 0);var _=s.ccclass,D=s.property;e("Explain",(x=_("Explain"),y=D({type:c}),g=D(u),m=D(u),x((C=t((P=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(r(t),"explainPrfb",C,r(t)),i(r(t),"levelsDataJson",E,r(t)),i(r(t),"idiomExplainJson",w,r(t)),l(r(t),"_level",void 0),t}n(t,e);var a=t.prototype;return a.start=function(){this.render()},a.render=function(){if(void 0===this.level){var e=Math.max(d.currentLevel-1,1);this.level=e}this.renderLevelExplain(this.level)},a.renderLevelExplain=function(e){var t=this;this.node.getChildByPath("bottom/prev").active=e>1,this.node.getChildByPath("bottom/next").active=e<d.currentLevel-1,this.updateLevelLabel(e);var n=this.levelsDataJson.json["level-"+e].map((function(e){return e.word})),i=this.idiomExplainJson.json.filter((function(e){return n.includes(e.word)})),r=this.node.getChildByPath("ScrollView/view/content");r.removeAllChildren(),i.forEach((function(e){var n=p(t.explainPrfb);n.getComponent(b).setData(e),r.addChild(n)}))},a.updateLevelLabel=function(e){this.node.getChildByPath("top/levelLabel/Label").getComponent(v).string="第"+e+"关"},a.onReturnButtonClick=function(){f.loadScene("level")},a.onPrevClick=function(){this.level-=1,this.render()},a.onNextClick=function(){this.level+=1,this.render()},o(t,[{key:"level",get:function(){return this._level},set:function(e){this._level=e}}]),t}(h)).prototype,"explainPrfb",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(P.prototype,"levelsDataJson",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(P.prototype,"idiomExplainJson",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=P))||L));a._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./storage.ts","./AudioManagerMain.ts","./enums.ts","./main.ts","./Native.ts","./AudioManagerLevel.ts","./config.ts","./User.ts","./util.ts","./Grid.ts","./Word.ts","./Level.ts","./Pass.ts","./Grade.ts","./Renwu.ts","./Setting.ts","./uma.min.ts","./ExplPref.ts","./Explain.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});