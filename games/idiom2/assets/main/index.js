System.register("chunks:///_virtual/AudioManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var n,t,i,r,o,a,c,u,l,s,p,d;return{setters:[function(e){n=e.defineProperty,t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized,a=e.createClass},function(e){c=e.cclegacy,u=e._decorator,l=e.AudioSource,s=e.AudioClip,p=e.assert,d=e.Component}],execute:function(){var f,h,y,g,_,v,S,b,A;c._RF.push({},"0198cipuXpM84CYVT5USs6d","AudioManager",void 0);var k=u.ccclass,C=u.property;e("AudioManager",(f=k("AudioManager"),h=C(l),y=C(s),f((A=b=function(e){function n(){for(var n,t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return n=e.call.apply(e,[this].concat(i))||this,r(o(n),"_audioSource",v,o(n)),r(o(n),"clickBtn",S,o(n)),n}i(n,e);var t=n.prototype;return t.onLoad=function(){var e=this.node.getComponent(l);p(e),this._audioSource=e,n._instance=this},t.playClickBtn=function(){this._audioSource.playOneShot(this.clickBtn)},a(n,null,[{key:"instance",get:function(){return this._instance}}]),n}(d),n(b,"_instance",null),v=t((_=A).prototype,"_audioSource",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(_.prototype,"clickBtn",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=_))||g));c._RF.pop()}}}));

System.register("chunks:///_virtual/enums.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){var r;t("GridState",void 0),e._RF.push({},"10574qxTLBPpYpsd+o/q3rr","enums",void 0),function(t){t[t.EMPTY=0]="EMPTY",t[t.BLANK=1]="BLANK"}(r||(r=t("GridState",{}))),e._RF.pop()}}}));

System.register("chunks:///_virtual/main.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(o){"use strict";var e,n,t,r,c,i;return{setters:[function(o){e=o.inheritsLoose},function(o){n=o.cclegacy,t=o._decorator,r=o.ProgressBar,c=o.director,i=o.Component}],execute:function(){var s;n._RF.push({},"1b3ffTiPC5Jc4Mr40gCsH+2","main",void 0);var a=t.ccclass;t.property,o("main",a("main")(s=function(o){function n(){return o.apply(this,arguments)||this}e(n,o);var t=n.prototype;return t.start=function(){},t.onStartButtonClick=function(){console.log("去答题");var o=this.node.getChildByPath("ProgressBar");o.active=!0;var e=o.getComponent(r);c.preloadScene("level",(function(o,n){e.progress=o/n,console.log("preload:",o,n)}),(function(o){console.log("onLoad"),c.loadScene("level")}))},n}(i))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/Level.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./config.ts","./Grid.ts","./Word.ts"],(function(e){"use strict";var r,t,i,n,l,o,s,a,c,d,u,h,f,_,v,g,p,y;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized,l=e.defineProperty},function(e){o=e.cclegacy,s=e._decorator,a=e.Prefab,c=e.resources,d=e.Label,u=e.instantiate,h=e.Vec3,f=e.Color,_=e.director,v=e.Component},function(e){g=e.config},function(e){p=e.Grid},function(e){y=e.Word}],execute:function(){var b,w,C,G,m;o._RF.push({},"3e04bwTD4xP+Y+M9dOi/RtN","Level",void 0);var D=s.ccclass,L=s.property;e("Level",(b=D("Level"),w=L({type:a}),b((m=r((G=function(e){function r(){for(var r,t=arguments.length,o=new Array(t),s=0;s<t;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o))||this,i(n(r),"gridPrfb",m,n(r)),l(n(r),"_level",void 0),l(n(r),"_levelData",void 0),l(n(r),"_currentGrid",null),l(n(r),"_gridsMap",{}),l(n(r),"_wordCtrl",void 0),r}t(r,e);var o=r.prototype;return o.onLoad=function(){this.init()},o.start=function(){},o.init=function(){var e=this;void 0===localStorage.current_level&&(localStorage.current_level=1),this._level=Number(localStorage.current_level),this._level>3&&(this._level=1),this.updateLevelLabel(),c.load("levels/level."+this._level,(function(r,t){e._levelData=e.processData(t.json),console.log("关卡数据：",e._levelData),e.genGrids(),e.genBottomGrids(),e._wordCtrl=new y(e._gridsMap)}))},o.updateLevelLabel=function(){this.node.getChildByPath("game/levelLabel/Label").getComponent(d).string="第"+this._level+"关"},o.processData=function(e){this._levelData={words:e};var r={};e.forEach((function(e){e.blanks.forEach((function(e){r[e]=!0}))}));for(var t=[],i=1;i<=8;i++)for(var n=1;n<=10;n++){var l=r[i+"_"+n],o=this.getWordByAxis(i,n),s={type:l?"blank":o?"char":"empty"};l?s._char=o:s.char=o,t.push(s)}return{words:e,chars:t}},o.__getWordsByAxis=function(e,r){return this._levelData.words.filter((function(t){return t.axis.includes(e+"_"+r)}))},o.getWordByAxis=function(e,r){var t=this.__getWordsByAxis(e,r);if(t.length>0){var i=t[0];return i.word.split("")[i.axis.indexOf(e+"_"+r)]}return""},o.genGrids=function(){for(var e=this.node.getChildByPath("game/grids/bg"),r=g.grid,t=!0,i=0;i<g.grids.rows;i++)for(var n=0;n<g.grids.cols;n++){var l=u(this.gridPrfb),o=new h(n*(r.w+2)-360+21+r.w/2+5,250,0);o.y=-i*(r.h+2)+235,l.setPosition(o);var s=l.getComponent(p);s.levelCtrl=this,s.setChar((i*g.grids.cols+n).toString());var a=this._levelData.chars[i*g.grids.cols+n];s.setData(a),s.col=n+1,s.row=i+1,this._gridsMap[s.row+"_"+s.col]=s,"blank"===a.type&&t&&(t=!1,this.setSelected(s)),e.addChild(l)}},o.genBottomGrids=function(){var e=this,r=this._levelData.chars.filter((function(e){return"blank"==e.type}));r.sort((function(){return Math.random()>.5?-1:1}));var t=this.node.getChildByPath("game/bottomGrids");r.forEach((function(r){var i=u(e.gridPrfb),n=i.getComponent(p);n.levelCtrl=e,n.isBottom=!0,n.setData(r),t.addChild(i)}))},o.setSelected=function(e){e.canSelect&&(null!==this._currentGrid&&(this._currentGrid.Selected=!1),this._currentGrid=e,e.Selected=!0,e.isFilled&&this._currentGrid.resetWord())},o.fillWord=function(e){this._currentGrid.canSelect&&(this._currentGrid.fillWord(e),this.checkCurrentWord()&&this.selectNext())},o.resetError=function(e){if(e.Label.color.equals(f.RED)){var r=this.__getWordsByAxis(e.row,e.col);this._wordCtrl.resetError(r)}},o.checkCurrentWord=function(){var e=this,r=!0;return this.__getWordsByAxis(this._currentGrid.row,this._currentGrid.col).forEach((function(t){e._wordCtrl.isAllFilled(t)&&(e._wordCtrl.checkFillResult(t)?(e._wordCtrl.playRightAni(t),e._wordCtrl.checkLevelPass()&&(console.log("过关"),localStorage.current_level=e._level+1,_.loadScene("pass"))):(r=!1,e._wordCtrl.playErrorAni(t)))})),r},o.selectNext=function(){var e,r=this,t=Object.values(this._gridsMap);this.__getWordsByAxis(this._currentGrid.row,this._currentGrid.col).find((function(t){var i=t.blanks.find((function(e){return!r._gridsMap[e].isFilled}));if(i)return e=r._gridsMap[i],!0})),e||(e=t.find((function(e){return"blank"==e.data.type&&!e.isFilled}))),e&&this.setSelected(e)},r}(v)).prototype,"gridPrfb",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=G))||C));o._RF.pop()}}}));

System.register("chunks:///_virtual/Pass.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var n,e,o,r,c;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,r=t.director,c=t.Component}],execute:function(){var s;e._RF.push({},"458430gYihLzo3Vnb3GbyjR","Pass",void 0);var i=o.ccclass;o.property,t("Pass",i("Pass")(s=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var o=e.prototype;return o.start=function(){},o.onBtnReturnClick=function(){r.loadScene("main")},o.onBtnNextClick=function(){r.loadScene("level")},e}(c))||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/config.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var o,n,r,e,c;return{setters:[function(t){o=t.defineProperty,n=t.inheritsLoose},function(t){r=t.cclegacy,e=t._decorator,c=t.Component}],execute:function(){var i,s,u;r._RF.push({},"5f2eaqunZtNMoK/hBwIwfCe","config",void 0);var f=e.ccclass;e.property,t("config",f("config")((u=s=function(t){function o(){return t.apply(this,arguments)||this}return n(o,t),o.prototype.start=function(){},o}(c),o(s,"grids",{rows:8,cols:10}),o(s,"grid",{w:65,h:65}),i=u))||i);r._RF.pop()}}}));

System.register("chunks:///_virtual/Grid.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts","./config.ts"],(function(t){"use strict";var e,i,n,o,s,r,l,a,c,h,d,u,p,f;return{setters:[function(t){e=t.inheritsLoose,i=t.defineProperty,n=t.assertThisInitialized,o=t.createClass},function(t){s=t.cclegacy,r=t._decorator,l=t.Input,a=t.Vec3,c=t.UIOpacity,h=t.Animation,d=t.Component,u=t.Label},function(t){p=t.AudioManager},function(t){f=t.config}],execute:function(){var y;s._RF.push({},"deaf6H74/9NZ4R3YTYY0wpc","Grid",void 0);var g=r.ccclass;r.property,t("Grid",g("Grid")(y=function(t){function s(){for(var e,o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return e=t.call.apply(t,[this].concat(s))||this,i(n(e),"data",void 0),i(n(e),"col",void 0),i(n(e),"row",void 0),i(n(e),"levelCtrl",null),i(n(e),"relTopGrid",void 0),i(n(e),"relBottomGrid",void 0),i(n(e),"isBottom",!1),i(n(e),"_bgName",void 0),i(n(e),"_selected",!1),i(n(e),"_bottomFilled",!1),e}e(s,t);var r=s.prototype;return r.start=function(){this.bindEvents()},r.bindEvents=function(){var t=this;this.node.on(l.EventType.TOUCH_END,(function(e){p.instance.playClickBtn(),t.isBottom?t.bottomFilled?t.relTopGrid.resetWord():t.levelCtrl.fillWord(t):t.levelCtrl.setSelected(t)}))},r.setData=function(t){if(this.data=t,"empty"!==t.type)switch(this.updateType(),this.Type){case"char":this.setChar(t.char);break;case"blank":this.setChar("");break;case"bottom_blank":this.setChar(t._char)}else this.node.active=!1},r.setBG=function(t){this._bgName=t;var e=this.node.getChildByPath("box/bgs");e.children.forEach((function(t){t.active=!1})),e.getChildByName(t).active=!0},r.updateType=function(){if("right"!==this._bgName)switch(this.setBG(this.Type),this.Type){case"bottom_blank":this.node.scale=new a(1.5,1.5,1)}},r.setOpacity=function(t){this.node.getComponent(c).opacity=255*t},r.setChar=function(t){null!=t&&(this.Label.string=t)},r.fillWord=function(t){this.resetWord(),t.relTopGrid=this,t.bottomFilled=!0,this.relBottomGrid=t,this.setChar(t.data._char)},r.resetWord=function(){this.canSelect&&null!=this.relBottomGrid&&(this.levelCtrl.resetError(this),this.relBottomGrid.relTopGrid=null,this.relBottomGrid.bottomFilled=!1,this.relBottomGrid=null,this.setChar(""),this.levelCtrl.setSelected(this))},r.playAni=function(t){this.node.getChildByPath("box").getComponent(h).play(t)},o(s,[{key:"index",get:function(){return this.col-1+(this.row-1)*f.grids.cols}},{key:"Label",get:function(){return this.node.getChildByPath("box/char").getComponent(u)}},{key:"isFilled",get:function(){return""!==this.Label.string}},{key:"isFillRight",get:function(){switch(this.data.type){case"blank":return this.Label.string===this.data._char;default:return!0}}},{key:"canSelect",get:function(){return"blank"===this.Type&&"right"!==this._bgName}},{key:"Type",get:function(){var t=this.data.type;return this.isBottom&&(t="bottom_blank"),t}},{key:"Selected",get:function(){return this._selected},set:function(t){this._selected=t,t?this.setBG("selected"):this.updateType()}},{key:"bottomFilled",get:function(){return this._bottomFilled},set:function(t){this._bottomFilled=t,this.setOpacity(t?.5:1)}}]),s}(d))||y);s._RF.pop()}}}));

System.register("chunks:///_virtual/Word.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(r){"use strict";var t,i,e,n,o;return{setters:[function(r){t=r.defineProperty},function(r){i=r.cclegacy,e=r.Color,n=r.tween,o=r.Vec3}],execute:function(){i._RF.push({},"e6416oXwZ9HtL3P3/uqW5Xe","Word",void 0);r("Word",function(){function r(r){t(this,"_gridsMap",void 0),this._gridsMap=r}var i=r.prototype;return i.isAllFilled=function(r){var t=this;return r.axis.every((function(r){return t._gridsMap[r].isFilled}))},i.checkFillResult=function(r){var t=this;return r.axis.every((function(r){return t._gridsMap[r].isFillRight}))},i.checkLevelPass=function(){return Object.values(this._gridsMap).every((function(r){return r.isFillRight}))},i.playRightAni=function(r){var t=this;r.axis.forEach((function(r,i){var a=t._gridsMap[r];a.setBG("right"),a.Label.color=e.WHITE,a.relBottomGrid&&a.relBottomGrid.setChar("");var s=.08;n(a.node).delay(s*i).to(s,{scale:new o(1.3,1.3,1)}).start().to(s,{scale:new o(1,1,1)}).start()}))},i.playErrorAni=function(r){var t=this;r.axis.forEach((function(r){var i=t._gridsMap[r];"blank"===i.data.type&&(i.Label.color=e.RED),i.playAni("error")}))},i.resetError=function(r){var t=this;r.forEach((function(r){r.axis.forEach((function(r){var i=t._gridsMap[r];"blank"===i.data.type&&(i.Label.color=e.BLACK)}))}))},r}());i._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./AudioManager.ts","./enums.ts","./main.ts","./config.ts","./Grid.ts","./Word.ts","./Level.ts","./Pass.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});