System.register("chunks:///_virtual/AudioManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var n,t,i,r,o,a,c,u,l,s,p,d;return{setters:[function(e){n=e.defineProperty,t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized,a=e.createClass},function(e){c=e.cclegacy,u=e._decorator,l=e.AudioSource,s=e.AudioClip,p=e.assert,d=e.Component}],execute:function(){var f,h,y,g,_,v,S,b,A;c._RF.push({},"0198cipuXpM84CYVT5USs6d","AudioManager",void 0);var k=u.ccclass,C=u.property;e("AudioManager",(f=k("AudioManager"),h=C(l),y=C(s),f((A=b=function(e){function n(){for(var n,t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return n=e.call.apply(e,[this].concat(i))||this,r(o(n),"_audioSource",v,o(n)),r(o(n),"clickBtn",S,o(n)),n}i(n,e);var t=n.prototype;return t.onLoad=function(){var e=this.node.getComponent(l);p(e),this._audioSource=e,n._instance=this},t.playClickBtn=function(){this._audioSource.playOneShot(this.clickBtn)},a(n,null,[{key:"instance",get:function(){return this._instance}}]),n}(d),n(b,"_instance",null),v=t((_=A).prototype,"_audioSource",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(_.prototype,"clickBtn",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=_))||g));c._RF.pop()}}}));

System.register("chunks:///_virtual/enums.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){var r;t("GridState",void 0),e._RF.push({},"10574qxTLBPpYpsd+o/q3rr","enums",void 0),function(t){t[t.DEFAULT=0]="DEFAULT",t[t.RIGHT=1]="RIGHT",t[t.ERROR=2]="ERROR"}(r||(r=t("GridState",{}))),e._RF.pop()}}}));

System.register("chunks:///_virtual/main.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(o){"use strict";var e,n,t,r,c,i;return{setters:[function(o){e=o.inheritsLoose},function(o){n=o.cclegacy,t=o._decorator,r=o.ProgressBar,c=o.director,i=o.Component}],execute:function(){var s;n._RF.push({},"1b3ffTiPC5Jc4Mr40gCsH+2","main",void 0);var a=t.ccclass;t.property,o("main",a("main")(s=function(o){function n(){return o.apply(this,arguments)||this}e(n,o);var t=n.prototype;return t.start=function(){},t.onStartButtonClick=function(){console.log("去答题");var o=this.node.getChildByPath("ProgressBar");o.active=!0;var e=o.getComponent(r);c.preloadScene("level",(function(o,n){e.progress=o/n,console.log("preload:",o,n)}),(function(o){console.log("onLoad"),c.loadScene("level")}))},n}(i))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/Level.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./enums.ts","./config.ts","./storage.ts","./Grid.ts","./Word.ts"],(function(t){"use strict";var e,r,i,n,o,s,l,a,c,d,u,h,f,v,_,g,p,b,y,C;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized,o=t.defineProperty},function(t){s=t.cclegacy,l=t._decorator,a=t.Prefab,c=t.resources,d=t.Label,u=t.instantiate,h=t.Vec3,f=t.Color,v=t.director,_=t.Component},function(t){g=t.GridState},function(t){p=t.config},function(t){b=t.storage},function(t){y=t.Grid},function(t){C=t.Word}],execute:function(){var w,m,G,x,D;s._RF.push({},"3e04bwTD4xP+Y+M9dOi/RtN","Level",void 0);var S=l.ccclass,L=l.property;t("Level",(w=S("Level"),m=L({type:a}),w((D=e((x=function(t){function e(){for(var e,r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(n(e),"gridPrfb",D,n(e)),o(n(e),"_level",void 0),o(n(e),"_levelData",void 0),o(n(e),"_currentGrid",null),o(n(e),"_gridsMap",{}),o(n(e),"_bottomGrids",[]),o(n(e),"_wordCtrl",void 0),e}r(e,t);var s=e.prototype;return s.onLoad=function(){this.init()},s.start=function(){},s.init=function(){var t=this;this._level=b.currentLevel,this.updateLevelLabel(),c.load("levels/level."+this._level,(function(e,r){t._levelData=t.processData(r.json),console.log("关卡数据：",t._levelData),t.genGrids(),t.genBottomGrids(),t.restoreStatus(),t._wordCtrl=new C(t._gridsMap)}))},s.updateLevelLabel=function(){this.node.getChildByPath("game/levelLabel/Label").getComponent(d).string="第"+this._level+"关"},s.processData=function(t){this._levelData={words:t};var e={};t.forEach((function(t){t.blanks.forEach((function(t){e[t]=!0}))}));for(var r=[],i=1;i<=8;i++)for(var n=1;n<=10;n++){var o=e[i+"_"+n],s=this.getWordByAxis(i,n),l={type:o?"blank":s?"char":"empty"};o?l._char=s:l.char=s,r.push(l)}return{words:t,chars:r}},s.__getWordsByAxis=function(t,e){return this._levelData.words.filter((function(r){return r.axis.includes(t+"_"+e)}))},s.getWordByAxis=function(t,e){var r=this.__getWordsByAxis(t,e);if(r.length>0){var i=r[0];return i.word.split("")[i.axis.indexOf(t+"_"+e)]}return""},s.genGrids=function(){for(var t=this.node.getChildByPath("game/grids/bg"),e=p.grid,r=!0,i=0;i<p.grids.rows;i++)for(var n=0;n<p.grids.cols;n++){var o=u(this.gridPrfb),s=new h(n*(e.w+2)-360+21+e.w/2+5,250,0);s.y=-i*(e.h+2)+235,o.setPosition(s);var l=o.getComponent(y);l.levelCtrl=this,l.setChar("");var a=this._levelData.chars[i*p.grids.cols+n];l.setData(a),l.col=n+1,l.row=i+1,this._gridsMap[l.axis]=l,b.currentSelectedAxis?l.axis===b.currentSelectedAxis&&this.setSelected(l):"blank"===a.type&&r&&(r=!1,this.setSelected(l)),t.addChild(o)}},s.genBottomGrids=function(){var t=this,e=b.bottomData;e||((e=this._levelData.chars.filter((function(t){return"blank"==t.type}))).sort((function(){return Math.random()>.5?-1:1})),b.bottomData=e);var r=this.node.getChildByPath("game/bottomGrids");e.forEach((function(e){var i=u(t.gridPrfb),n=i.getComponent(y);t._bottomGrids.push(n),n.levelCtrl=t,n.isBottom=!0,n.setData(e),r.addChild(i)}))},s.restoreStatus=function(){var t=this,e=b.FillMap;Object.keys(e).forEach((function(r){var i=t._gridsMap[r],n=e[r],o=n.state,s=n.bottom_idx;if(void 0!==o&&(i.State=o),void 0!==s){var l=t._bottomGrids[s];i.fillWord(l),i.State===g.RIGHT&&l.setChar("")}}))},s.setSelected=function(t){t.canSelect&&(null!==this._currentGrid&&(this._currentGrid.Selected=!1),this._currentGrid=t,t.Selected=!0,t.isFilled&&this._currentGrid.resetWord())},s.fillWord=function(t){this._currentGrid.canSelect&&(this._currentGrid.fillWord(t),this.checkCurrentWord()&&this.selectNext())},s.resetError=function(t){if(t.Label.color.equals(f.RED)){var e=this.__getWordsByAxis(t.row,t.col);this._wordCtrl.resetError(e)}},s.checkCurrentWord=function(){var t=this,e=!1,r=!0;return this.__getWordsByAxis(this._currentGrid.row,this._currentGrid.col).forEach((function(i){t._wordCtrl.isAllFilled(i)&&(t._wordCtrl.checkFillResult(i)?(e=!0,r=!0,t._wordCtrl.playRightAni(i),t._wordCtrl.checkLevelPass()&&(console.log("过关"),b.levelStatusData="",b.currentLevel=t._level+1,v.loadScene("pass"))):(e||(r=!1),t._wordCtrl.playErrorAni(i)))})),r},s.selectNext=function(){var t,e=this,r=Object.values(this._gridsMap);this.__getWordsByAxis(this._currentGrid.row,this._currentGrid.col).find((function(r){var i=r.blanks.find((function(t){return!e._gridsMap[t].isFilled}));if(i)return t=e._gridsMap[i],!0})),t||(t=r.find((function(t){return"blank"==t.data.type&&!t.isFilled}))),t&&this.setSelected(t)},s.onReturnButtonClick=function(){v.loadScene("main")},e}(_)).prototype,"gridPrfb",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=x))||G));s._RF.pop()}}}));

System.register("chunks:///_virtual/Pass.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var n,e,o,r,c;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,r=t.director,c=t.Component}],execute:function(){var s;e._RF.push({},"458430gYihLzo3Vnb3GbyjR","Pass",void 0);var i=o.ccclass;o.property,t("Pass",i("Pass")(s=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var o=e.prototype;return o.start=function(){},o.onBtnReturnClick=function(){r.loadScene("main")},o.onBtnNextClick=function(){r.loadScene("level")},e}(c))||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/config.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var o,n,r,e,c;return{setters:[function(t){o=t.defineProperty,n=t.inheritsLoose},function(t){r=t.cclegacy,e=t._decorator,c=t.Component}],execute:function(){var i,s,u;r._RF.push({},"5f2eaqunZtNMoK/hBwIwfCe","config",void 0);var f=e.ccclass;e.property,t("config",f("config")((u=s=function(t){function o(){return t.apply(this,arguments)||this}return n(o,t),o.prototype.start=function(){},o}(c),o(s,"grids",{rows:8,cols:10}),o(s,"grid",{w:65,h:65}),i=u))||i);r._RF.pop()}}}));

System.register("chunks:///_virtual/Grid.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts","./enums.ts","./config.ts","./storage.ts"],(function(t){"use strict";var e,i,s,o,n,r,a,l,c,h,d,u,f,p,g,y,b;return{setters:[function(t){e=t.inheritsLoose,i=t.defineProperty,s=t.assertThisInitialized,o=t.createClass},function(t){n=t.cclegacy,r=t._decorator,a=t.Input,l=t.Vec3,c=t.UIOpacity,h=t.Animation,d=t.Label,u=t.Color,f=t.Component},function(t){p=t.AudioManager},function(t){g=t.GridState},function(t){y=t.config},function(t){b=t.storage}],execute:function(){var m;n._RF.push({},"deaf6H74/9NZ4R3YTYY0wpc","Grid",void 0);var _=r.ccclass;r.property,t("Grid",_("Grid")(m=function(t){function n(){for(var e,o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return e=t.call.apply(t,[this].concat(n))||this,i(s(e),"data",void 0),i(s(e),"col",void 0),i(s(e),"row",void 0),i(s(e),"levelCtrl",null),i(s(e),"relTopGrid",void 0),i(s(e),"relBottomGrid",void 0),i(s(e),"isBottom",!1),i(s(e),"_bgName",void 0),i(s(e),"_state",g.DEFAULT),i(s(e),"_selected",!1),i(s(e),"_bottomFilled",!1),e}e(n,t);var r=n.prototype;return r.start=function(){this.bindEvents()},r.bindEvents=function(){var t=this;this.node.on(a.EventType.TOUCH_END,(function(e){"empty"!==t.Type&&(p.instance.playClickBtn(),t.isBottom?t.bottomFilled?t.relTopGrid.resetWord():t.levelCtrl.fillWord(t):t.levelCtrl.setSelected(t))}))},r.setData=function(t){switch(this.data=t,this.updateType(),this.Type){case"char":this.setChar(t.char);break;case"blank":this.setChar("");break;case"bottom_blank":this.setChar(t._char)}},r.setBG=function(t){this._bgName=t;var e=this.node.getChildByPath("box/bgs");e.children.forEach((function(t){t.active=!1})),e.getChildByName(t).active=!0},r.updateType=function(){if("right"!==this._bgName)switch(this.setBG(this.Type),this.Type){case"bottom_blank":this.node.scale=new l(1.5,1.5,1)}},r.setOpacity=function(t){this.node.getComponent(c).opacity=255*t},r.setChar=function(t){null!=t&&(this.Label.string=t)},r.fillWord=function(t){this.resetWord(),t.relTopGrid=this,t.bottomFilled=!0,this.relBottomGrid=t,this.setChar(t.data._char),b.setFillRelBottom(this.axis,t.node.getSiblingIndex())},r.resetWord=function(){this.canSelect&&null!=this.relBottomGrid&&(this.levelCtrl.resetError(this),this.relBottomGrid.relTopGrid=null,this.relBottomGrid.bottomFilled=!1,this.relBottomGrid=null,this.setChar(""),this.levelCtrl.setSelected(this))},r.playAni=function(t){this.node.getChildByPath("box").getComponent(h).play(t)},o(n,[{key:"index",get:function(){return this.col-1+(this.row-1)*y.grids.cols}},{key:"axis",get:function(){return this.row+"_"+this.col}},{key:"Label",get:function(){return this.node.getChildByPath("box/char").getComponent(d)}},{key:"isFilled",get:function(){return""!==this.Label.string}},{key:"isFillRight",get:function(){switch(this.data.type){case"blank":return this.Label.string===this.data._char;default:return!0}}},{key:"canSelect",get:function(){return"blank"===this.Type&&"right"!==this._bgName}},{key:"State",get:function(){return this._state},set:function(t){switch(this._state=t,b.setFillState(this.axis,this._state),this._state){case g.DEFAULT:this.Label.color=u.BLACK;break;case g.RIGHT:this.setBG("right"),this.Label.color=u.WHITE;break;case g.ERROR:this.Label.color=u.RED}}},{key:"Type",get:function(){var t=this.data.type;return this.isBottom&&(t="bottom_blank"),t}},{key:"Selected",get:function(){return this._selected},set:function(t){this._selected=t,b.currentSelectedAxis=this.axis,t?this.setBG("selected"):this.updateType()}},{key:"bottomFilled",get:function(){return this._bottomFilled},set:function(t){this._bottomFilled=t,this.setOpacity(t?.5:1)}}]),n}(f))||m);n._RF.pop()}}}));

System.register("chunks:///_virtual/Word.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./enums.ts"],(function(t){"use strict";var r,i,e,n,a;return{setters:[function(t){r=t.defineProperty},function(t){i=t.cclegacy,e=t.tween,n=t.Vec3},function(t){a=t.GridState}],execute:function(){i._RF.push({},"e6416oXwZ9HtL3P3/uqW5Xe","Word",void 0);t("Word",function(){function t(t){r(this,"_gridsMap",void 0),this._gridsMap=t}var i=t.prototype;return i.isAllFilled=function(t){var r=this;return t.axis.every((function(t){return r._gridsMap[t].isFilled}))},i.checkFillResult=function(t){var r=this;return t.axis.every((function(t){return r._gridsMap[t].isFillRight}))},i.checkLevelPass=function(){return Object.values(this._gridsMap).every((function(t){return t.isFillRight}))},i.playRightAni=function(t){var r=this;t.axis.forEach((function(t,i){var s=r._gridsMap[t];s.State=a.RIGHT,s.relBottomGrid&&s.relBottomGrid.setChar("");var o=.08;e(s.node).delay(o*i).to(o,{scale:new n(1.3,1.3,1)}).start().to(o,{scale:new n(1,1,1)}).start()}))},i.playErrorAni=function(t){var r=this;t.axis.forEach((function(t){var i=r._gridsMap[t];"blank"===i.data.type&&(i.State=a.ERROR),i.playAni("error")}))},i.resetError=function(t){var r=this;t.forEach((function(t){t.axis.forEach((function(t){var i=r._gridsMap[t];"blank"===i.data.type&&(i.State=a.DEFAULT)}))}))},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/storage.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,a;return{setters:[function(t){e=t.createClass},function(t){a=t.cclegacy}],execute:function(){a._RF.push({},"f584eSUDntGLaiSlh/FmzpS","storage",void 0);t("storage",function(){function t(){}return t._setLevelStatusData=function(e,a){var l=t.levelStatusData;l[e]=a,t.levelStatusData=l},t._setFillMap=function(e,a,l){var n=t.levelStatusData;n.fill_map||(n.fill_map={}),n.fill_map[e]||(n.fill_map[e]={}),n.fill_map[e][a]=l,t.levelStatusData=n},t.setFillRelBottom=function(e,a){t._setFillMap(e,"bottom_idx",a)},t.setFillState=function(e,a){t._setFillMap(e,"state",a)},e(t,null,[{key:"currentLevel",get:function(){void 0===localStorage.current_level&&(localStorage.current_level=1);var t=Number(localStorage.current_level);return t>3&&(t=1),t},set:function(t){localStorage.current_level=t}},{key:"levelStatusData",get:function(){var t;try{t=JSON.parse(localStorage.level_status_data)}catch(t){}return t||{}},set:function(t){localStorage.level_status_data=JSON.stringify(t)}},{key:"bottomData",get:function(){return t.levelStatusData.bottom_data},set:function(e){t._setLevelStatusData("bottom_data",e)}},{key:"currentSelectedAxis",get:function(){return t.levelStatusData.current_axis},set:function(e){t._setLevelStatusData("current_axis",e)}},{key:"FillMap",get:function(){return t.levelStatusData.fill_map||{}}}]),t}());a._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./AudioManager.ts","./enums.ts","./main.ts","./config.ts","./storage.ts","./Grid.ts","./Word.ts","./Level.ts","./Pass.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});